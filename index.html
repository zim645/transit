<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binga Marketplace - Buy & Sell Fish, Livestock, Goods</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a5276;
            --secondary: #d4ac0d;
            --accent: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #f8f9fa;
            --dark: #333333;
            --border: #e0e0e0;
            --tourist: #8e44ad;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        /* Header */
        .site-header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-top {
            background: var(--primary);
            color: white;
            padding: 8px 0;
            font-size: 14px;
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-top .header-container {
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: var(--primary);
        }
        
        .logo-icon {
            font-size: 32px;
            color: var(--secondary);
        }
        
        .logo-text h1 {
            font-size: 24px;
            font-weight: 700;
        }
        
        .logo-text span {
            font-size: 12px;
            color: #666;
        }
        
        /* Auth in top-right corner */
        .auth-container {
            position: relative;
        }
        
        .auth-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .auth-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            border-bottom: 2px solid var(--border);
            padding-bottom: 10px;
        }
        
        .auth-type-btn {
            flex: 1;
            padding: 10px;
            text-align: center;
            background: #f0f0f0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .auth-type-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .auth-btn {
            padding: 8px 20px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            font-size: 14px;
        }
        
        .auth-btn.login {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        
        .auth-btn.register {
            background: var(--primary);
            color: white;
        }
        
        .auth-btn.logout {
            background: var(--danger);
            color: white;
        }
        
        .user-menu {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .user-name {
            font-weight: 600;
            color: var(--dark);
        }
        
        /* Auth Modal - UPDATED FOR MOBILE */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
            padding: 20px 10px;
        }
        
        .auth-modal-content {
            background: white;
            border-radius: 8px;
            width: 400px;
            max-width: 95%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .auth-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
        }
        
        .auth-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
        }
        
        .auth-tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
        }
        
        .auth-form {
            padding: 25px;
        }
        
        .auth-form h3 {
            margin-bottom: 20px;
            color: var(--dark);
            font-size: 20px;
        }
        
        .form-group {
            margin-bottom: 18px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #555;
            font-size: 14px;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 16px;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            font-size: 16px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
            width: 100%;
        }
        
        .btn-primary:hover {
            background: #154360;
        }
        
        /* Navigation */
        .main-nav {
            background: white;
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
        }
        
        .nav-link {
            padding: 15px 20px;
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            border-bottom: 3px solid transparent;
        }
        
        .nav-link:hover, .nav-link.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .nav-link.tourist {
            color: var(--tourist);
        }
        
        .nav-link.tourist:hover, .nav-link.tourist.active {
            color: var(--tourist);
            border-bottom-color: var(--tourist);
        }
        
        .post-ad-btn {
            margin-left: auto;
            background: var(--accent);
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 600;
        }
        
        /* Main Content */
        .main-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }
        
        /* Sidebar */
        .sidebar {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .sidebar-section {
            margin-bottom: 30px;
        }
        
        .sidebar-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark);
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }
        
        .category-list, .location-list {
            list-style: none;
        }
        
        .category-item, .location-item {
            padding: 8px 0;
            border-bottom: 1px solid #f5f5f5;
        }
        
        .category-item a, .location-item a {
            text-decoration: none;
            color: #555;
            display: flex;
            justify-content: space-between;
        }
        
        .category-item a:hover, .location-item a:hover {
            color: var(--primary);
        }
        
        .category-count, .location-count {
            background: #f0f0f0;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
        }
        
        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .product-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .product-image {
            height: 180px;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 48px;
            position: relative;
            overflow: hidden;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-price {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .product-details {
            padding: 15px;
        }
        
        .product-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
            font-size: 16px;
            line-height: 1.4;
        }
        
        .product-meta {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        
        .product-location {
            font-size: 12px;
            color: #999;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .whatsapp-btn {
            background: #25D366;
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            font-weight: 600;
            margin-top: 10px;
        }
        
        /* Tourist Attraction Cards */
        .attraction-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            border-top: 4px solid var(--tourist);
        }
        
        .attraction-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .attraction-image {
            height: 200px;
            background: linear-gradient(45deg, #e0d0f0, #d0c0e0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 48px;
            position: relative;
            overflow: hidden;
        }
        
        .attraction-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .attraction-type {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--tourist);
            color: white;
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        
        /* Search Bar */
        .search-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .search-box {
            display: flex;
            gap: 10px;
        }
        
        .search-input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 16px;
        }
        
        .search-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0 30px;
            cursor: pointer;
            font-weight: 600;
        }
        
        /* Footer */
        .site-footer {
            background: var(--dark);
            color: white;
            margin-top: 50px;
            padding: 40px 0;
        }
        
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        
        .footer-section h3 {
            font-size: 18px;
            margin-bottom: 20px;
            color: white;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #bbb;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        /* Dashboard (when logged in) */
        .dashboard-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        .dashboard-header {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        /* Admin Panel */
        .admin-panel {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .admin-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .admin-tab {
            padding: 15px 30px;
            cursor: pointer;
            font-weight: 600;
            white-space: nowrap;
        }
        
        .admin-tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .nav-container {
                flex-direction: column;
                padding: 10px;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .post-ad-btn {
                margin: 10px 0 0 0;
            }
            
            .header-container {
                flex-direction: column;
                gap: 15px;
                padding: 15px 20px;
            }
            
            .auth-buttons {
                width: 100%;
                justify-content: center;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .search-box select {
                max-width: 100% !important;
            }
            
            .dashboard-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .admin-tabs {
                flex-direction: column;
            }
            
            .admin-tab {
                padding: 12px 20px;
                border-bottom: 1px solid var(--border);
            }
        }
        
        /* Mobile-specific fixes for registration modal */
        @media (max-width: 480px) {
            .auth-modal-content {
                width: 95%;
                max-height: 85vh;
                margin: 10px;
            }
            
            .auth-form {
                padding: 20px 15px;
            }
            
            .auth-tabs {
                flex-wrap: wrap;
            }
            
            .auth-tab {
                padding: 12px 10px;
                font-size: 14px;
            }
            
            .auth-type-selector {
                flex-direction: column;
                gap: 8px;
            }
            
            .auth-type-btn {
                padding: 10px;
                font-size: 14px;
            }
            
            .form-group {
                margin-bottom: 15px;
            }
            
            .form-control {
                padding: 10px;
                font-size: 16px; /* Prevents iOS zoom */
            }
            
            .btn-primary {
                padding: 12px;
            }
            
            .auth-form h3 {
                font-size: 18px;
                margin-bottom: 15px;
            }
            
            .password-reset {
                padding: 15px;
                font-size: 13px;
            }
        }
        
        /* Extra small screens */
        @media (max-width: 360px) {
            .auth-modal-content {
                width: 98%;
                max-height: 90vh;
            }
            
            .auth-form {
                padding: 15px 10px;
            }
            
            .auth-tab {
                padding: 10px 8px;
                font-size: 13px;
            }
            
            .form-label {
                font-size: 13px;
            }
        }
        
        /* Verification badge */
        .verified-badge {
            background: var(--accent);
            color: white;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }
        
        /* No products message */
        .no-products {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 8px;
            grid-column: 1 / -1;
        }
        
        /* Featured Products */
        .featured-products {
            margin-bottom: 40px;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title.tourist {
            color: var(--tourist);
        }
        
        /* Alert */
        .alert {
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        /* Welcome Message */
        .welcome-message {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 40px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 40px;
        }
        
        .welcome-message h2 {
            font-size: 32px;
            margin-bottom: 15px;
        }
        
        .welcome-message p {
            font-size: 18px;
            max-width: 800px;
            margin: 0 auto 25px;
        }
        
        .cta-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .cta-button {
            padding: 15px 30px;
            background: white;
            color: var(--primary);
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            font-size: 16px;
        }
        
        .cta-button.secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }
        
        /* How it works */
        .how-it-works {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }
        
        .step-card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .step-number {
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            margin: 0 auto 20px;
        }
        
        .step-card h3 {
            margin-bottom: 15px;
            color: var(--dark);
        }
        
        /* Image upload preview */
        .image-upload-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .image-preview {
            width: 120px;
            height: 120px;
            border: 2px dashed #ccc;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }
        
        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .remove-image {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        /* Status badges */
        .status-badge {
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
        }
        
        .status-pending {
            background: var(--warning);
            color: white;
        }
        
        .status-active {
            background: var(--accent);
            color: white;
        }
        
        .status-rejected {
            background: var(--danger);
            color: white;
        }
        
        /* Action buttons */
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 5px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }
        
        .action-btn.approve {
            background: var(--accent);
            color: white;
        }
        
        .action-btn.reject {
            background: var(--danger);
            color: white;
        }
        
        .action-btn.edit {
            background: var(--primary);
            color: white;
        }
        
        .action-btn.delete {
            background: var(--danger);
            color: white;
        }
        
        /* Tab content */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Image upload button */
        .image-upload-btn {
            display: inline-block;
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            text-align: center;
            margin-top: 10px;
        }
        
        .image-upload-btn:hover {
            background: #154360;
        }
        
        /* Password reset */
        .password-reset {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 14px;
        }
        
        /* File input styling */
        input[type="file"] {
            display: none;
        }
        
        /* Uploaded image preview */
        .uploaded-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        /* Ensure proper scrolling on mobile */
        html, body {
            overflow-x: hidden;
        }
        
        /* Touch-friendly tap targets */
        button, 
        .btn, 
        .auth-btn, 
        .nav-link, 
        .post-ad-btn,
        .action-btn,
        .whatsapp-btn {
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Improve form usability on mobile */
        select, 
        input, 
        textarea {
            font-size: 16px !important; /* Prevents iOS zoom */
        }
    </style>
</head>
<body>
    <!-- Top Bar -->
    <div class="header-top">
        <div class="header-container">
            <div>
                <i class="fas fa-phone-alt"></i> +263 77 286 3815 | 
                <i class="fas fa-map-marker-alt"></i> Binga, Lake Kariba
            </div>
            <div>
                <i class="fab fa-whatsapp"></i> WhatsApp: +263 77 286 3815
            </div>
        </div>
    </div>
    
    <!-- Main Header -->
    <header class="site-header">
        <div class="header-container">
            <!-- Logo -->
            <a href="#" class="logo">
                <div class="logo-icon">üêü</div>
                <div class="logo-text">
                    <h1>Binga Marketplace</h1>
                    <span>Buy & Sell Fish, Livestock & More</span>
                </div>
            </a>
            
            <!-- Auth Section (Top Right Corner) -->
            <div class="auth-container">
                <div class="auth-buttons" id="authButtons">
                    <!-- Will be populated by JavaScript -->
                </div>
                
                <!-- User Menu (shown when logged in) -->
                <div class="user-menu" id="userMenu" style="display: none;">
                    <div class="user-avatar" id="userAvatar">JD</div>
                    <div>
                        <div class="user-name" id="userName">John Doe</div>
                        <button class="auth-btn logout" onclick="logout()">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" onclick="showSection('home')">Home</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('fish')">Fish</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('livestock')">Livestock</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('agriculture')">Agriculture</a></li>
                <li><a href="#" class="nav-link tourist" onclick="showSection('tourism')">Tourism</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('services')">Services</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('property')">Property</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('vehicles')">Vehicles</a></li>
            </ul>
            
            <a href="#" class="post-ad-btn" onclick="showPostAdForm()">
                <i class="fas fa-plus-circle"></i> Post Free Ad
            </a>
        </div>
    </nav>
    
    <!-- Main Content -->
    <div id="mainContent">
        <!-- Home/Marketplace Section (Default) -->
        <div id="homeSection">
            <!-- Welcome Message -->
            <div class="welcome-message">
                <h2>Welcome to Binga Marketplace!</h2>
                <p>The first digital marketplace for Binga community. Buy and sell fish, livestock, agricultural products, and services directly with your neighbors.</p>
                
                <div class="cta-buttons">
                    <a href="#" class="cta-button" onclick="showPostAdForm()">
                        <i class="fas fa-plus-circle"></i> Post Your First Ad
                    </a>
                    <button class="cta-button secondary" onclick="openAuthModal('login')">
                        <i class="fas fa-sign-in-alt"></i> Login as Seller
                    </button>
                    <button class="cta-button secondary" onclick="openAuthModal('login', 'admin')">
                        <i class="fas fa-crown"></i> Login as Admin
                    </button>
                </div>
            </div>
            
            <!-- How It Works -->
            <div>
                <h2 class="section-title">
                    <i class="fas fa-play-circle"></i> How It Works
                </h2>
                
                <div class="how-it-works">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <h3>Register & Post</h3>
                        <p>Create your free seller account and post your products with photos and details</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <h3>Admin Approval</h3>
                        <p>Our administrator reviews and approves your listing to ensure quality</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <h3>Buyers Contact You</h3>
                        <p>Verified buyers contact you directly via WhatsApp to discuss purchases</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">4</div>
                        <h3>Sell & Earn</h3>
                        <p>Complete the sale and earn money from your products or services</p>
                    </div>
                </div>
            </div>
            
            <!-- Search Bar -->
            <div class="search-container">
                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" placeholder="What are you looking for?">
                    <select class="form-control" id="categorySelect" style="max-width: 200px;">
                        <option value="">All Categories</option>
                        <option value="fish">Fish</option>
                        <option value="goat">Goats</option>
                        <option value="cow">Cattle</option>
                        <option value="poultry">Poultry</option>
                        <option value="agriculture">Agriculture</option>
                        <option value="tourism">Tourism</option>
                    </select>
                    <select class="form-control" id="locationSelect" style="max-width: 200px;">
                        <option value="">All Locations</option>
                        <option value="Siachilaba">Siachilaba</option>
                        <option value="Kariyangwe">Kariyangwe</option>
                        <option value="Binga Centre">Binga Centre</option>
                        <option value="Chete Island">Chete Island</option>
                        <option value="Other">Other Areas</option>
                    </select>
                    <button class="search-btn" onclick="searchProducts()">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>
            </div>
            
            <!-- Featured Products -->
            <div class="featured-products">
                <h2 class="section-title">
                    <i class="fas fa-fire"></i> Marketplace Listings
                </h2>
                
                <div id="marketplaceMessage" class="no-products" style="display: none;">
                    <div style="font-size: 60px; margin-bottom: 20px;">üè™</div>
                    <h3>Marketplace is Empty</h3>
                    <p>No approved products have been listed yet. Be the first to post!</p>
                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="showPostAdForm()" style="margin: 10px;">
                            <i class="fas fa-plus-circle"></i> Post Your First Ad
                        </button>
                        <button class="btn" onclick="openAuthModal('login')" style="margin: 10px; background: #f0f0f0;">
                            <i class="fas fa-sign-in-alt"></i> Login as Seller
                        </button>
                    </div>
                </div>
                
                <div class="products-grid" id="featuredProducts">
                    <!-- Approved products will be loaded here -->
                </div>
            </div>
            
            <!-- Tourist Attractions Section -->
            <div id="touristSection" style="margin: 40px 0;">
                <h2 class="section-title tourist">
                    <i class="fas fa-camera"></i> Binga Tourist Attractions
                </h2>
                
                <div id="noAttractionsMessage" class="no-products" style="display: none;">
                    <div style="font-size: 60px; margin-bottom: 20px;">üèûÔ∏è</div>
                    <h3>No Tourist Attractions Listed</h3>
                    <p>Administrators can add Binga's beautiful attractions here</p>
                </div>
                
                <div class="products-grid" id="touristAttractions">
                    <!-- Tourist attractions will be loaded here -->
                </div>
            </div>
            
            <!-- Recent Products -->
            <div class="main-container">
                <!-- Sidebar -->
                <aside class="sidebar">
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">Categories</h3>
                        <ul class="category-list" id="categoryList">
                            <!-- Categories will be loaded here -->
                        </ul>
                    </div>
                    
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">Locations</h3>
                        <ul class="location-list" id="locationList">
                            <!-- Locations will be loaded here -->
                        </ul>
                    </div>
                    
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">Sell Fast Tips</h3>
                        <ul style="list-style: none; color: #666; font-size: 14px;">
                            <li style="margin-bottom: 10px;">‚úÖ Use clear photos</li>
                            <li style="margin-bottom: 10px;">‚úÖ Set fair prices</li>
                            <li style="margin-bottom: 10px;">‚úÖ Include WhatsApp number</li>
                            <li style="margin-bottom: 10px;">‚úÖ Be honest about condition</li>
                            <li>‚úÖ Respond quickly to buyers</li>
                        </ul>
                    </div>
                </aside>
                
                <!-- Products Grid -->
                <div>
                    <h2 class="section-title">
                        <i class="fas fa-clock"></i> Recent Listings
                    </h2>
                    
                    <div class="products-grid" id="recentProducts">
                        <!-- Recent products will be loaded here -->
                    </div>
                    
                    <div id="recentProductsMessage" class="no-products" style="display: none;">
                        <div style="font-size: 60px; margin-bottom: 20px;">üì¶</div>
                        <h3>No Recent Listings</h3>
                        <p>Check back soon or be the first to post!</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tourism Section -->
        <div id="tourismSection" class="dashboard-container" style="display: none;">
            <div class="dashboard-header">
                <h2><i class="fas fa-camera"></i> Binga Tourist Attractions</h2>
                <p>Discover the beauty of Binga - Lake Kariba, Hot Springs, Beaches & More</p>
            </div>
            
            <div id="tourismContent">
                <!-- Tourism content will be loaded here -->
            </div>
        </div>
        
        <!-- Dashboard Section (for logged in users) -->
        <div id="dashboardSection" class="dashboard-container" style="display: none;">
            <div class="dashboard-header">
                <h2>My Dashboard</h2>
                <p>Manage your products and account</p>
            </div>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-number" id="myProductsCount">0</div>
                    <div>My Products</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="myViewsCount">0</div>
                    <div>Total Views</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="myPendingCount">0</div>
                    <div>Pending Approval</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="myActiveCount">0</div>
                    <div>Active Listings</div>
                </div>
            </div>
            
            <div class="admin-panel" id="userDashboard">
                <!-- User dashboard content will be loaded here -->
            </div>
        </div>
        
        <!-- Admin Panel Section -->
        <div id="adminSection" class="dashboard-container" style="display: none;">
            <div class="dashboard-header">
                <h2><i class="fas fa-crown"></i> Administrator Control Panel</h2>
                <p>Manage marketplace, approve listings, control tourist attractions</p>
            </div>
            
            <div class="admin-panel">
                <div class="admin-tabs">
                    <div class="admin-tab active" onclick="showAdminTab('pending')">Pending Ads</div>
                    <div class="admin-tab" onclick="showAdminTab('attractions')">Tourist Attractions</div>
                    <div class="admin-tab" onclick="showAdminTab('reported')">Reported Ads</div>
                    <div class="admin-tab" onclick="showAdminTab('users')">Users</div>
                    <div class="admin-tab" onclick="showAdminTab('stats')">Statistics</div>
                    <div class="admin-tab" onclick="showAdminTab('settings')">Settings</div>
                </div>
                
                <div id="adminContent">
                    <!-- Admin content will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Post Ad Form -->
        <div id="postAdSection" class="dashboard-container" style="display: none;">
            <div class="dashboard-header">
                <h2>Post Free Advertisement</h2>
                <p>Reach thousands of buyers in Binga</p>
            </div>
            
            <div class="admin-panel">
                <div id="postAdForm">
                    <!-- Post ad form will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Add Tourist Attraction Form -->
        <div id="addAttractionSection" class="dashboard-container" style="display: none;">
            <div class="dashboard-header">
                <h2><i class="fas fa-plus-circle"></i> Add Tourist Attraction</h2>
                <p>Showcase Binga's beautiful places to visitors</p>
            </div>
            
            <div class="admin-panel">
                <div id="addAttractionForm">
                    <!-- Add attraction form will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Edit Tourist Attraction Form -->
        <div id="editAttractionSection" class="dashboard-container" style="display: none;">
            <div class="dashboard-header">
                <h2><i class="fas fa-edit"></i> Edit Tourist Attraction</h2>
                <p>Update attraction details</p>
            </div>
            
            <div class="admin-panel">
                <div id="editAttractionForm">
                    <!-- Edit attraction form will be loaded here -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-section">
                <h3>Binga Marketplace</h3>
                <p>The first online marketplace in Binga. Buy and sell fish, livestock, agricultural products, services, and more.</p>
                <p style="margin-top: 15px;">
                    <i class="fas fa-phone"></i> +263 77 286 3815<br>
                    <i class="fas fa-envelope"></i> info@bingamarket.co.zw
                </p>
            </div>
            
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#" onclick="showSection('home')">Home</a></li>
                    <li><a href="#" onclick="showSection('fish')">Fish Market</a></li>
                    <li><a href="#" onclick="showSection('livestock')">Livestock</a></li>
                    <li><a href="#" onclick="showSection('tourism')">Tourist Attractions</a></li>
                    <li><a href="#" onclick="showPostAdForm()">Post Free Ad</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Help & Support</h3>
                <ul class="footer-links">
                    <li><a href="#" onclick="alert('Contact +263 77 286 3815 for all inquiries')">Contact Administrator</a></li>
                    <li><a href="#" onclick="alert('Safety tips coming soon')">Safety Tips</a></li>
                    <li><a href="#" onclick="alert('How to sell on Binga Marketplace')">How to Sell</a></li>
                    <li><a href="#" onclick="alert('Terms & Conditions coming soon')">Terms & Conditions</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Follow Us</h3>
                <div style="display: flex; gap: 15px; margin-top: 15px;">
                    <a href="#" style="color: white; font-size: 24px;"><i class="fab fa-facebook"></i></a>
                    <a href="#" style="color: white; font-size: 24px;"><i class="fab fa-whatsapp"></i></a>
                    <a href="#" style="color: white; font-size: 24px;"><i class="fab fa-twitter"></i></a>
                </div>
                <p style="margin-top: 20px; color: #bbb; font-size: 14px;">
                    ¬© 2024 Binga Marketplace. Administrator Contact: +263 77 286 3815
                </p>
            </div>
        </div>
    </footer>
    
    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-modal-content">
            <div class="auth-tabs">
                <div class="auth-tab active" onclick="showAuthForm('login')">Login</div>
                <div class="auth-tab" onclick="showAuthForm('register')">Register as Seller</div>
            </div>
            
            <div class="auth-form">
                <div id="loginTypeSelector" style="margin-bottom: 20px;">
                    <div class="auth-type-selector">
                        <button class="auth-type-btn active" onclick="setLoginType('seller')">Seller Login</button>
                        <button class="auth-type-btn" onclick="setLoginType('admin')">Admin Login</button>
                    </div>
                </div>
                
                <div id="loginForm">
                    <h3 id="loginTitle">Login to Seller Account</h3>
                    <div class="form-group">
                        <label class="form-label" id="loginLabel">Username</label>
                        <input type="text" class="form-control" id="loginEmail" placeholder="Enter your username">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" id="loginPassword" placeholder="Enter your password">
                    </div>
                    <button class="btn btn-primary" onclick="login()">Login</button>
                    <div class="password-reset">
                        <p style="color: #666; font-size: 14px;">
                            <a href="#" style="color: var(--primary);" onclick="handleForgotPassword()">Forgot Password?</a>
                        </p>
                        <p style="color: #666; font-size: 14px; margin-top: 10px;">
                            Note: For security reasons, you need to register again if you forget your password.
                        </p>
                    </div>
                </div>
                
                <div id="registerForm" style="display: none;">
                    <h3>Create Seller Account</h3>
                    <div class="form-group">
                        <label class="form-label">Full Name*</label>
                        <input type="text" class="form-control" id="registerName" placeholder="Full name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone Number*</label>
                        <input type="tel" class="form-control" id="registerPhone" placeholder="263771234567" required>
                        <small style="color: #666; display: block; margin-top: 5px;">Enter phone number without + sign (e.g., 263771234567)</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Username*</label>
                        <input type="text" class="form-control" id="registerUsername" placeholder="Choose a username" required>
                        <small style="color: #666; display: block; margin-top: 5px;">This will be used to login</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password*</label>
                        <input type="password" class="form-control" id="registerPassword" placeholder="Create password" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirm Password*</label>
                        <input type="password" class="form-control" id="registerConfirmPassword" placeholder="Confirm password" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Location in Binga*</label>
                        <select class="form-control" id="registerLocation" required>
                            <option value="">Select Location</option>
                            <option>Siachilaba</option>
                            <option>Kariyangwe</option>
                            <option>Binga Centre</option>
                            <option>Chete Island</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="register()">Create Seller Account</button>
                    <p style="text-align: center; margin-top: 15px; color: #666; font-size: 14px;">
                        Note: All accounts must be approved by administrator
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Database for storing users, products, and tourist attractions - IMPROVED VERSION
        const BINGA_MARKETPLACE_DB = {
            // Initialize local storage databases
            init: function() {
                // Initialize users database
                if (!localStorage.getItem('binga_marketplace_users')) {
                    // Create default admin user and sample sellers
                    const defaultUsers = [
                        {
                            id: 1,
                            username: 'admin',
                            password: 'admin123',
                            name: 'Binga Administrator',
                            phone: '263772863815',
                            email: 'admin@bingamarket.co.zw',
                            location: 'Binga Centre',
                            type: 'admin',
                            role: 'superadmin',
                            registered: new Date().toISOString(),
                            products: [],
                            rating: 5.0,
                            approved: true,
                            status: 'active'
                        },
                        {
                            id: 2,
                            username: 'johnfish',
                            password: 'john123',
                            name: 'John Fishing',
                            phone: '263773456789',
                            email: 'john@email.com',
                            location: 'Siachilaba',
                            type: 'seller',
                            registered: new Date().toISOString(),
                            products: [1001, 1002],
                            rating: 4.5,
                            approved: true,
                            status: 'active'
                        },
                        {
                            id: 3,
                            username: 'marygoat',
                            password: 'mary123',
                            name: 'Mary Livestock',
                            phone: '263774567890',
                            email: 'mary@email.com',
                            location: 'Kariyangwe',
                            type: 'seller',
                            registered: new Date().toISOString(),
                            products: [1003, 1004],
                            rating: 4.8,
                            approved: true,
                            status: 'active'
                        },
                        {
                            id: 4,
                            username: 'thomasfarm',
                            password: 'thomas123',
                            name: 'Thomas Farming',
                            phone: '263775678901',
                            email: 'thomas@email.com',
                            location: 'Binga Centre',
                            type: 'seller',
                            registered: new Date().toISOString(),
                            products: [1005],
                            rating: 4.2,
                            approved: true,
                            status: 'active'
                        }
                    ];
                    localStorage.setItem('binga_marketplace_users', JSON.stringify(defaultUsers));
                }
                
                // Initialize products database - WITH SAMPLE DATA
                if (!localStorage.getItem('binga_marketplace_products')) {
                    const sampleProducts = [
                        {
                            id: 1001,
                            title: 'Fresh Kapenta - 20kg',
                            description: 'Sun-dried kapenta from Lake Kariba. High quality, perfect for cooking. Fresh catch from this morning.',
                            category: 'fish',
                            price: 80,
                            location: 'Siachilaba',
                            sellerId: 2,
                            sellerName: 'John Fishing',
                            sellerPhone: '263773456789',
                            whatsappLink: 'https://wa.me/263773456789?text=Hi! I saw your Fresh Kapenta - 20kg on Binga Marketplace',
                            status: 'active',
                            approved: true,
                            featured: true,
                            views: 45,
                            createdAt: new Date('2024-01-15').toISOString(),
                            adminContact: '263772863815',
                            imageUrl: ''
                        },
                        {
                            id: 1002,
                            title: 'Lake Bream - Fresh Catch',
                            description: 'Fresh bream caught today. 2-3kg each. Perfect for grilling or frying. Available in bulk.',
                            category: 'fish',
                            price: 15,
                            location: 'Siachilaba',
                            sellerId: 2,
                            sellerName: 'John Fishing',
                            sellerPhone: '263773456789',
                            whatsappLink: 'https://wa.me/263773456789?text=Hi! I saw your Lake Bream - Fresh Catch on Binga Marketplace',
                            status: 'active',
                            approved: true,
                            featured: false,
                            views: 32,
                            createdAt: new Date('2024-01-18').toISOString(),
                            adminContact: '263772863815',
                            imageUrl: ''
                        },
                        {
                            id: 1003,
                            title: 'Healthy Goats - 3 Available',
                            description: '1-year old male goats. Good for breeding or meat. Vaccinated and healthy.',
                            category: 'goat',
                            price: 120,
                            location: 'Kariyangwe',
                            sellerId: 3,
                            sellerName: 'Mary Livestock',
                            sellerPhone: '263774567890',
                            whatsappLink: 'https://wa.me/263774567890?text=Hi! I saw your Healthy Goats - 3 Available on Binga Marketplace',
                            status: 'active',
                            approved: true,
                            featured: true,
                            views: 67,
                            createdAt: new Date('2024-01-12').toISOString(),
                            adminContact: '263772863815',
                            imageUrl: ''
                        },
                        {
                            id: 1004,
                            title: 'Local Chickens - 10 Available',
                            description: 'Free-range local chickens. Good for meat and eggs. Ready for sale.',
                            category: 'poultry',
                            price: 25,
                            location: 'Kariyangwe',
                            sellerId: 3,
                            sellerName: 'Mary Livestock',
                            sellerPhone: '263774567890',
                            whatsappLink: 'https://wa.me/263774567890?text=Hi! I saw your Local Chickens - 10 Available on Binga Marketplace',
                            status: 'active',
                            approved: true,
                            featured: false,
                            views: 28,
                            createdAt: new Date('2024-01-20').toISOString(),
                            adminContact: '263772863815',
                            imageUrl: ''
                        },
                        {
                            id: 1005,
                            title: 'Fertilizer - 50kg bag',
                            description: 'Compound D fertilizer. Perfect for maize farming. High quality agricultural fertilizer.',
                            category: 'agriculture',
                            price: 35,
                            location: 'Binga Centre',
                            sellerId: 4,
                            sellerName: 'Thomas Farming',
                            sellerPhone: '263775678901',
                            whatsappLink: 'https://wa.me/263775678901?text=Hi! I saw your Fertilizer - 50kg bag on Binga Marketplace',
                            status: 'active',
                            approved: true,
                            featured: true,
                            views: 39,
                            createdAt: new Date('2024-01-10').toISOString(),
                            adminContact: '263772863815',
                            imageUrl: ''
                        }
                    ];
                    localStorage.setItem('binga_marketplace_products', JSON.stringify(sampleProducts));
                }
                
                // Initialize tourist attractions database
                if (!localStorage.getItem('binga_marketplace_attractions')) {
                    const sampleAttractions = [
                        {
                            id: 2001,
                            name: 'Binga Beach',
                            type: 'beach',
                            typeName: 'Beach',
                            location: 'Lake Kariba Shore',
                            description: 'Beautiful sandy beach on Lake Kariba. Perfect for swimming, picnics, and sunset views. Clean and family-friendly.',
                            contact: '263772863815',
                            whatsappLink: 'https://wa.me/263772863815?text=Hi! I want to book a tour to Binga Beach from Binga Marketplace',
                            status: 'active',
                            addedBy: 1,
                            addedByName: 'Binga Administrator',
                            createdAt: new Date('2024-01-01').toISOString(),
                            adminContact: '263772863815',
                            imageUrl: ''
                        },
                        {
                            id: 2002,
                            name: 'Siachilaba Hot Springs',
                            type: 'hotspring',
                            typeName: 'Hot Spring',
                            location: 'Siachilaba',
                            description: 'Natural hot springs with therapeutic properties. Popular for relaxation and healing. Beautiful natural setting.',
                            contact: '263772863815',
                            whatsappLink: 'https://wa.me/263772863815?text=Hi! I want to book a tour to Siachilaba Hot Springs from Binga Marketplace',
                            status: 'active',
                            addedBy: 1,
                            addedByName: 'Binga Administrator',
                            createdAt: new Date('2024-01-05').toISOString(),
                            adminContact: '263772863815',
                            imageUrl: ''
                        },
                        {
                            id: 2003,
                            name: 'Lake Kariba Fishing Tours',
                            type: 'tour',
                            typeName: 'Tour Service',
                            location: 'Lake Kariba',
                            description: 'Guided fishing tours on Lake Kariba. Equipment provided. Experience the best fishing spots with local guides.',
                            contact: '263772863815',
                            whatsappLink: 'https://wa.me/263772863815?text=Hi! I want to book a fishing tour on Lake Kariba from Binga Marketplace',
                            status: 'active',
                            addedBy: 1,
                            addedByName: 'Binga Administrator',
                            createdAt: new Date('2024-01-08').toISOString(),
                            adminContact: '263772863815',
                            imageUrl: ''
                        },
                        {
                            id: 2004,
                            name: 'Chete Island Safari',
                            type: 'wildlife',
                            typeName: 'Wildlife',
                            location: 'Chete Island',
                            description: 'Wildlife safari on Chete Island. See elephants, buffalo, and various bird species in their natural habitat.',
                            contact: '263772863815',
                            whatsappLink: 'https://wa.me/263772863815?text=Hi! I want to book a safari to Chete Island from Binga Marketplace',
                            status: 'active',
                            addedBy: 1,
                            addedByName: 'Binga Administrator',
                            createdAt: new Date('2024-01-12').toISOString(),
                            adminContact: '263772863815',
                            imageUrl: ''
                        }
                    ];
                    localStorage.setItem('binga_marketplace_attractions', JSON.stringify(sampleAttractions));
                }
                
                // Initialize categories
                if (!localStorage.getItem('binga_marketplace_categories')) {
                    const categories = [
                        {id: 'fish', name: 'Fish & Seafood', icon: 'üêü'},
                        {id: 'goat', name: 'Goats', icon: 'üêê'},
                        {id: 'cow', name: 'Cattle', icon: 'üêÑ'},
                        {id: 'poultry', name: 'Poultry', icon: 'üêì'},
                        {id: 'agriculture', name: 'Agriculture', icon: 'üåæ'},
                        {id: 'tourism', name: 'Tourism Services', icon: 'üèûÔ∏è'},
                        {id: 'services', name: 'Services', icon: 'üîß'},
                        {id: 'property', name: 'Property', icon: 'üè†'},
                        {id: 'vehicles', name: 'Vehicles', icon: 'üöó'}
                    ];
                    localStorage.setItem('binga_marketplace_categories', JSON.stringify(categories));
                }
                
                // Initialize locations
                if (!localStorage.getItem('binga_marketplace_locations')) {
                    const locations = [
                        {id: 'Siachilaba', name: 'Siachilaba'},
                        {id: 'Kariyangwe', name: 'Kariyangwe'},
                        {id: 'Binga Centre', name: 'Binga Centre'},
                        {id: 'Chete Island', name: 'Chete Island'},
                        {id: 'Lake Kariba', name: 'Lake Kariba'},
                        {id: 'Other', name: 'Other Areas'}
                    ];
                    localStorage.setItem('binga_marketplace_locations', JSON.stringify(locations));
                }
                
                // Initialize attraction types
                if (!localStorage.getItem('binga_marketplace_attraction_types')) {
                    const attractionTypes = [
                        {id: 'beach', name: 'Beach'},
                        {id: 'hotspring', name: 'Hot Spring'},
                        {id: 'lake', name: 'Lake View'},
                        {id: 'cultural', name: 'Cultural Site'},
                        {id: 'wildlife', name: 'Wildlife'},
                        {id: 'accommodation', name: 'Accommodation'},
                        {id: 'tour', name: 'Tour Service'}
                    ];
                    localStorage.setItem('binga_marketplace_attraction_types', JSON.stringify(attractionTypes));
                }
                
                console.log('Database initialized successfully');
            },
            
            // User operations
            users: {
                getAll: function() {
                    const users = JSON.parse(localStorage.getItem('binga_marketplace_users')) || [];
                    return users;
                },
                
                getSellers: function() {
                    return this.getAll().filter(u => u.type === 'seller');
                },
                
                getAdmins: function() {
                    return this.getAll().filter(u => u.type === 'admin');
                },
                
                add: function(user) {
                    const users = this.getAll();
                    const newUser = {
                        id: Date.now(),
                        ...user,
                        registered: new Date().toISOString(),
                        products: [],
                        rating: 0,
                        approved: user.type === 'admin' ? true : false,
                        status: 'pending'
                    };
                    users.push(newUser);
                    localStorage.setItem('binga_marketplace_users', JSON.stringify(users));
                    console.log('New user added:', newUser);
                    return newUser;
                },
                
                find: function(username) {
                    const users = this.getAll();
                    return users.find(u => u.username === username);
                },
                
                findByPhone: function(phone) {
                    const users = this.getAll();
                    return users.find(u => u.phone === phone);
                },
                
                findById: function(id) {
                    const users = this.getAll();
                    return users.find(u => u.id === id);
                },
                
                update: function(id, updates) {
                    const users = this.getAll();
                    const index = users.findIndex(u => u.id === id);
                    if (index !== -1) {
                        users[index] = {...users[index], ...updates};
                        localStorage.setItem('binga_marketplace_users', JSON.stringify(users));
                        return true;
                    }
                    return false;
                },
                
                delete: function(id) {
                    const users = this.getAll();
                    const filtered = users.filter(u => u.id !== id);
                    localStorage.setItem('binga_marketplace_users', JSON.stringify(filtered));
                }
            },
            
            // Product operations
            products: {
                getAll: function() {
                    const products = JSON.parse(localStorage.getItem('binga_marketplace_products')) || [];
                    return products;
                },
                
                getActive: function() {
                    return this.getAll().filter(p => p.status === 'active' && p.approved);
                },
                
                getPending: function() {
                    return this.getAll().filter(p => !p.approved || p.status === 'pending');
                },
                
                getByCategory: function(category) {
                    return this.getActive().filter(p => p.category === category);
                },
                
                getBySeller: function(sellerId) {
                    return this.getAll().filter(p => p.sellerId === sellerId);
                },
                
                add: function(product) {
                    const products = this.getAll();
                    const newProduct = {
                        id: Date.now(),
                        ...product,
                        views: 0,
                        status: 'pending',
                        approved: false,
                        featured: false,
                        createdAt: new Date().toISOString(),
                        adminContact: '263772863815'
                    };
                    products.push(newProduct);
                    localStorage.setItem('binga_marketplace_products', JSON.stringify(products));
                    console.log('New product added:', newProduct);
                    return newProduct;
                },
                
                update: function(id, updates) {
                    const products = this.getAll();
                    const index = products.findIndex(p => p.id === id);
                    if (index !== -1) {
                        products[index] = {...products[index], ...updates};
                        localStorage.setItem('binga_marketplace_products', JSON.stringify(products));
                        return true;
                    }
                    return false;
                },
                
                delete: function(id) {
                    const products = this.getAll();
                    const filtered = products.filter(p => p.id !== id);
                    localStorage.setItem('binga_marketplace_products', JSON.stringify(filtered));
                }
            },
            
            // Tourist Attractions operations
            attractions: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('binga_marketplace_attractions')) || [];
                },
                
                getActive: function() {
                    return this.getAll().filter(a => a.status === 'active');
                },
                
                add: function(attraction) {
                    const attractions = this.getAll();
                    const newAttraction = {
                        id: Date.now(),
                        ...attraction,
                        status: 'active',
                        createdAt: new Date().toISOString(),
                        adminContact: '263772863815',
                        whatsappLink: attraction.whatsappLink || `https://wa.me/${attraction.contact}?text=Hi! I want to book a tour to ${attraction.name} from Binga Marketplace`
                    };
                    attractions.push(newAttraction);
                    localStorage.setItem('binga_marketplace_attractions', JSON.stringify(attractions));
                    return newAttraction;
                },
                
                update: function(id, updates) {
                    const attractions = this.getAll();
                    const index = attractions.findIndex(a => a.id === id);
                    if (index !== -1) {
                        attractions[index] = {...attractions[index], ...updates};
                        localStorage.setItem('binga_marketplace_attractions', JSON.stringify(attractions));
                    }
                },
                
                delete: function(id) {
                    const attractions = this.getAll();
                    const filtered = attractions.filter(a => a.id !== id);
                    localStorage.setItem('binga_marketplace_attractions', JSON.stringify(filtered));
                },
                
                findById: function(id) {
                    const attractions = this.getAll();
                    return attractions.find(a => a.id === id);
                }
            }
        };
        
        // Initialize database
        BINGA_MARKETPLACE_DB.init();
        
        // Current user state
        let currentUser = null;
        let loginType = 'seller';
        
        // Initialize the application
        function initApp() {
            // Check if user is already logged in
            const savedUser = localStorage.getItem('binga_current_user');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    // Verify user still exists in database
                    const userExists = BINGA_MARKETPLACE_DB.users.findById(currentUser.id);
                    if (userExists) {
                        currentUser = userExists; // Refresh user data
                        localStorage.setItem('binga_current_user', JSON.stringify(currentUser));
                        updateAuthUI();
                    } else {
                        localStorage.removeItem('binga_current_user');
                        currentUser = null;
                        showAuthButtons();
                    }
                } catch (e) {
                    localStorage.removeItem('binga_current_user');
                    currentUser = null;
                    showAuthButtons();
                }
            } else {
                showAuthButtons();
            }
            
            // Load marketplace data
            loadMarketplace();
            loadTouristAttractions();
            loadCategories();
            loadLocations();
            
            // Set active navigation
            setActiveNav('home');
        }
        
        // Show auth buttons (login/register)
        function showAuthButtons() {
            document.getElementById('authButtons').innerHTML = `
                <button class="auth-btn login" onclick="openAuthModal('login', 'seller')">Seller Login</button>
                <button class="auth-btn register" onclick="openAuthModal('register')">Register as Seller</button>
            `;
            document.getElementById('userMenu').style.display = 'none';
            document.getElementById('authButtons').style.display = 'flex';
        }
        
        // Set login type
        function setLoginType(type) {
            loginType = type;
            const buttons = document.querySelectorAll('.auth-type-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            if (type === 'seller') {
                buttons[0].classList.add('active');
                document.getElementById('loginTitle').textContent = 'Login to Seller Account';
                document.getElementById('loginLabel').textContent = 'Username';
                document.getElementById('loginEmail').placeholder = 'Enter your username';
            } else {
                buttons[1].classList.add('active');
                document.getElementById('loginTitle').textContent = 'Admin Login';
                document.getElementById('loginLabel').textContent = 'Admin Username';
                document.getElementById('loginEmail').placeholder = 'Admin username';
            }
        }
        
        // Update auth UI after login
        function updateAuthUI() {
            if (currentUser) {
                document.getElementById('authButtons').style.display = 'none';
                document.getElementById('userMenu').style.display = 'flex';
                
                // Set user info
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userAvatar').textContent = 
                    currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
                
                // Update user dashboard if visible
                if (document.getElementById('dashboardSection').style.display !== 'none') {
                    loadUserDashboard();
                }
            } else {
                showAuthButtons();
            }
        }
        
        // Open auth modal
        function openAuthModal(form = 'login', type = 'seller') {
            loginType = type;
            const modal = document.getElementById('authModal');
            modal.style.display = 'flex';
            showAuthForm(form);
            setLoginType(type);
            
            // Scroll to top on mobile
            if (window.innerWidth < 768) {
                modal.scrollTop = 0;
            }
        }
        
        // Close auth modal
        function closeAuthModal() {
            document.getElementById('authModal').style.display = 'none';
        }
        
        // Show login or register form
        function showAuthForm(form) {
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const tabs = document.querySelectorAll('.auth-tab');
            
            if (form === 'login') {
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                tabs[0].classList.add('active');
                tabs[1].classList.remove('active');
                document.getElementById('loginTypeSelector').style.display = 'block';
            } else {
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
                tabs[0].classList.remove('active');
                tabs[1].classList.add('active');
                document.getElementById('loginTypeSelector').style.display = 'none';
            }
        }
        
        // Handle forgot password
        function handleForgotPassword() {
            if (confirm("For security reasons, you need to register again if you forget your password. Click OK to go to registration page.")) {
                showAuthForm('register');
            }
        }
        
        // Login function
        function login() {
            const username = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!username || !password) {
                alert('Please enter username and password');
                return;
            }
            
            // Find user
            const users = BINGA_MARKETPLACE_DB.users.getAll();
            let user = null;
            
            if (loginType === 'admin') {
                // Admin login
                user = users.find(u => 
                    u.username === username && 
                    u.password === password &&
                    u.type === 'admin'
                );
            } else {
                // Seller login
                user = users.find(u => 
                    u.username === username && 
                    u.password === password &&
                    u.type === 'seller'
                );
                
                if (user && !user.approved) {
                    alert('Your seller account is pending approval. Contact administrator at +263 77 286 3815');
                    return;
                }
            }
            
            if (user) {
                currentUser = user;
                localStorage.setItem('binga_current_user', JSON.stringify(user));
                updateAuthUI();
                closeAuthModal();
                
                // Clear form
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                
                // Show success message
                showAlert(`Login successful! Welcome ${user.name}`, 'success');
                
                // If seller just registered and approved, show post ad form
                if (user.type === 'seller' && user.justRegistered) {
                    setTimeout(() => {
                        showPostAdForm();
                        // Remove the flag
                        BINGA_MARKETPLACE_DB.users.update(user.id, { justRegistered: false });
                    }, 1000);
                }
                // Redirect based on user type
                else if (user.type === 'admin') {
                    setTimeout(() => showSection('admin'), 500);
                } else {
                    setTimeout(() => showSection('dashboard'), 500);
                }
            } else {
                alert('Invalid credentials. Please check your username and password.');
            }
        }
        
        // Register function
        function register() {
            const name = document.getElementById('registerName').value.trim();
            const phone = document.getElementById('registerPhone').value.replace(/\D/g, '');
            const username = document.getElementById('registerUsername').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            const location = document.getElementById('registerLocation').value;
            
            if (!name || !phone || !username || !password || !confirmPassword || !location) {
                alert('Please fill all required fields');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return;
            }
            
            if (phone.length < 9) {
                alert('Please enter a valid phone number');
                return;
            }
            
            // Check if username already exists
            const users = BINGA_MARKETPLACE_DB.users.getAll();
            if (users.find(u => u.username === username)) {
                alert('Username already taken. Please choose another one.');
                return;
            }
            
            if (users.find(u => u.phone === phone)) {
                alert('Phone number already registered');
                return;
            }
            
            // Add new user
            const newUser = BINGA_MARKETPLACE_DB.users.add({
                username: username,
                password: password,
                name: name,
                phone: phone,
                email: '',
                location: location,
                type: 'seller',
                justRegistered: true  // Flag to show post ad form after login
            });
            
            // Auto-approve for demo (remove in production)
            BINGA_MARKETPLACE_DB.users.update(newUser.id, {
                approved: true,
                status: 'active'
            });
            
            // Show success message
            showAlert('Registration successful! You can now login with your username and password.', 'success');
            
            // Clear form
            document.getElementById('registerName').value = '';
            document.getElementById('registerPhone').value = '';
            document.getElementById('registerUsername').value = '';
            document.getElementById('registerPassword').value = '';
            document.getElementById('registerConfirmPassword').value = '';
            document.getElementById('registerLocation').value = '';
            
            // Go back to login
            showAuthForm('login');
            setLoginType('seller');
            
            // Auto-fill login form
            document.getElementById('loginEmail').value = username;
        }
        
        // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                currentUser = null;
                localStorage.removeItem('binga_current_user');
                showAuthButtons();
                showSection('home');
                showAlert('Logged out successfully', 'success');
            }
        }
        
        // Load marketplace products
        function loadMarketplace() {
            const products = BINGA_MARKETPLACE_DB.products.getActive();
            
            // Sort by date (newest first)
            products.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            // Check if there are any products
            const featuredContainer = document.getElementById('featuredProducts');
            const message = document.getElementById('marketplaceMessage');
            const recentContainer = document.getElementById('recentProducts');
            const recentMessage = document.getElementById('recentProductsMessage');
            
            if (products.length === 0) {
                // Show empty marketplace message
                message.style.display = 'block';
                featuredContainer.style.display = 'none';
                recentMessage.style.display = 'block';
                recentContainer.style.display = 'none';
                return;
            }
            
            // Hide empty messages
            message.style.display = 'none';
            recentMessage.style.display = 'none';
            
            // Featured products (verified and popular)
            const featuredProducts = products.filter(p => p.featured).slice(0, 8);
            const recentProducts = products.slice(0, 12);
            
            // Display featured products
            featuredContainer.style.display = 'grid';
            featuredContainer.innerHTML = featuredProducts.map(product => renderProductCard(product)).join('');
            
            // Display recent products
            recentContainer.style.display = 'grid';
            recentContainer.innerHTML = recentProducts.map(product => renderProductCard(product)).join('');
        }
        
        // Load tourist attractions
        function loadTouristAttractions() {
            const attractions = BINGA_MARKETPLACE_DB.attractions.getActive();
            
            const container = document.getElementById('touristAttractions');
            const message = document.getElementById('noAttractionsMessage');
            
            if (attractions.length === 0) {
                container.style.display = 'none';
                message.style.display = 'block';
            } else {
                container.style.display = 'grid';
                message.style.display = 'none';
                container.innerHTML = attractions.map(attraction => renderAttractionCard(attraction)).join('');
            }
        }
        
        // Render product card
        function renderProductCard(product) {
            const categoryIcons = {
                'fish': 'üêü',
                'goat': 'üêê',
                'cow': 'üêÑ',
                'poultry': 'üêì',
                'agriculture': 'üåæ',
                'tourism': 'üèûÔ∏è',
                'services': 'üîß',
                'property': 'üè†',
                'vehicles': 'üöó'
            };
            
            const icon = categoryIcons[product.category] || 'üì¶';
            const displayIcon = product.imageUrl ? `<img src="${product.imageUrl}" alt="${product.title}">` : icon;
            
            return `
                <div class="product-card">
                    <div class="product-image">
                        ${displayIcon}
                        <div class="product-price">$${product.price}</div>
                    </div>
                    <div class="product-details">
                        <h3 class="product-title">
                            ${product.title}
                            ${product.approved ? '<span class="verified-badge">‚úì Approved</span>' : ''}
                        </h3>
                        <p class="product-meta">${product.description.substring(0, 60)}...</p>
                        <div class="product-location">
                            <i class="fas fa-map-marker-alt"></i> ${product.location}
                        </div>
                        <a href="${product.whatsappLink}" target="_blank" class="whatsapp-btn">
                            <i class="fab fa-whatsapp"></i> Contact Seller
                        </a>
                    </div>
                </div>
            `;
        }
        
        // Render tourist attraction card
        function renderAttractionCard(attraction) {
            const attractionIcons = {
                'beach': 'üèñÔ∏è',
                'hotspring': '‚ô®Ô∏è',
                'lake': 'üåä',
                'cultural': 'üèõÔ∏è',
                'wildlife': 'üêò',
                'accommodation': 'üè®',
                'tour': 'üö£'
            };
            
            const icon = attractionIcons[attraction.type] || 'üèûÔ∏è';
            const displayImage = attraction.imageUrl ? 
                `<img src="${attraction.imageUrl}" alt="${attraction.name}">` : 
                icon;
            
            return `
                <div class="attraction-card">
                    <div class="attraction-image">
                        ${displayImage}
                        <div class="attraction-type">${attraction.typeName || attraction.type}</div>
                    </div>
                    <div class="product-details">
                        <h3 class="product-title">
                            ${attraction.name}
                            <span class="verified-badge" style="background: var(--tourist);">üèûÔ∏è Tourist</span>
                        </h3>
                        <p class="product-meta">${attraction.description.substring(0, 80)}...</p>
                        <div class="product-location">
                            <i class="fas fa-map-marker-alt"></i> ${attraction.location}
                        </div>
                        <div style="margin-top: 10px;">
                            <a href="${attraction.whatsappLink}" target="_blank" class="whatsapp-btn" style="background: var(--tourist);">
                                <i class="fab fa-whatsapp"></i> Book on WhatsApp
                            </a>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Load categories with counts
        function loadCategories() {
            const categories = JSON.parse(localStorage.getItem('binga_marketplace_categories')) || [];
            const activeProducts = BINGA_MARKETPLACE_DB.products.getActive();
            
            const container = document.getElementById('categoryList');
            
            container.innerHTML = categories.map(cat => {
                // Count products in this category
                const count = activeProducts.filter(p => p.category === cat.id).length;
                
                return `
                    <li class="category-item">
                        <a href="#" onclick="showCategory('${cat.id}')">
                            ${cat.icon} ${cat.name}
                            <span class="category-count">${count}</span>
                        </a>
                    </li>
                `;
            }).join('');
        }
        
        // Load locations with counts
        function loadLocations() {
            const locations = JSON.parse(localStorage.getItem('binga_marketplace_locations')) || [];
            const activeProducts = BINGA_MARKETPLACE_DB.products.getActive();
            
            const container = document.getElementById('locationList');
            
            container.innerHTML = locations.map(loc => {
                // Count products in this location
                const count = activeProducts.filter(p => p.location === loc.id).length;
                
                return `
                    <li class="location-item">
                        <a href="#" onclick="showLocation('${loc.id}')">
                            ${loc.name}
                            <span class="location-count">${count}</span>
                        </a>
                    </li>
                `;
            }).join('');
        }
        
        // Show section (home, fish, livestock, etc.)
        function showSection(section) {
            // Hide all sections
            document.getElementById('homeSection').style.display = 'none';
            document.getElementById('tourismSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'none';
            document.getElementById('adminSection').style.display = 'none';
            document.getElementById('postAdSection').style.display = 'none';
            document.getElementById('addAttractionSection').style.display = 'none';
            document.getElementById('editAttractionSection').style.display = 'none';
            
            // Show selected section
            if (section === 'home') {
                document.getElementById('homeSection').style.display = 'block';
                loadMarketplace();
                loadTouristAttractions();
            } else if (section === 'tourism') {
                document.getElementById('tourismSection').style.display = 'block';
                loadTourismContent();
            } else if (section === 'dashboard') {
                if (!currentUser || currentUser.type !== 'seller') {
                    openAuthModal('login', 'seller');
                    return;
                }
                document.getElementById('dashboardSection').style.display = 'block';
                loadUserDashboard();
            } else if (section === 'admin') {
                if (!currentUser || currentUser.type !== 'admin') {
                    openAuthModal('login', 'admin');
                    return;
                }
                document.getElementById('adminSection').style.display = 'block';
                showAdminTab('pending');
            } else {
                // For category sections, filter products
                document.getElementById('homeSection').style.display = 'block';
                filterProductsByCategory(section);
            }
            
            // Update active nav
            setActiveNav(section);
        }
        
        // Load tourism content
        function loadTourismContent() {
            const container = document.getElementById('tourismContent');
            const attractions = BINGA_MARKETPLACE_DB.attractions.getActive();
            
            if (attractions.length > 0) {
                container.innerHTML = `
                    <div class="products-grid">
                        ${attractions.map(attraction => renderAttractionCard(attraction)).join('')}
                    </div>
                    <div style="text-align: center; margin-top: 30px;">
                        <h3>Plan Your Binga Visit</h3>
                        <p>Contact our tourism desk for bookings and information:</p>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 20px;">
                            <h4><i class="fab fa-whatsapp"></i> WhatsApp: +263 77 286 3815</h4>
                            <p>Available for tour bookings, accommodation, and travel information</p>
                            <a href="https://wa.me/263772863815" target="_blank" class="whatsapp-btn" style="margin-top: 10px;">
                                <i class="fab fa-whatsapp"></i> Chat on WhatsApp
                            </a>
                        </div>
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <div class="no-products">
                        <div style="font-size: 60px; margin-bottom: 20px;">üèûÔ∏è</div>
                        <h3>Tourist Attractions Coming Soon</h3>
                        <p>Binga's beautiful attractions will be listed here by administrator</p>
                        <p style="margin-top: 10px;">Contact: +263 77 286 3815 for tourism information</p>
                    </div>
                `;
            }
        }
        
        // Set active navigation
        function setActiveNav(section) {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Find and activate the correct nav link
            const navLinks = document.querySelectorAll('.nav-link');
            for (let link of navLinks) {
                if (link.textContent.toLowerCase().includes(section.toLowerCase()) || 
                    (section === 'home' && link.classList.contains('active'))) {
                    link.classList.add('active');
                    break;
                }
            }
            
            // Special case for tourism
            if (section === 'tourism') {
                document.querySelector('.nav-link.tourist').classList.add('active');
            }
        }
        
        // Filter products by category
        function filterProductsByCategory(category) {
            const products = BINGA_MARKETPLACE_DB.products.getByCategory(category);
            const container = document.getElementById('recentProducts');
            const message = document.getElementById('recentProductsMessage');
            
            const categoryNames = {
                'fish': 'Fish & Seafood',
                'goat': 'Goats',
                'cow': 'Cattle',
                'poultry': 'Poultry',
                'agriculture': 'Agricultural Products',
                'tourism': 'Tourism Services',
                'services': 'Services',
                'property': 'Property',
                'vehicles': 'Vehicles'
            };
            
            if (products.length > 0) {
                message.style.display = 'none';
                container.style.display = 'grid';
                container.innerHTML = products.map(product => renderProductCard(product)).join('');
                
                // Update section title
                document.querySelector('#homeSection .section-title').innerHTML = `
                    <i class="fas fa-tag"></i> ${categoryNames[category] || category}
                `;
            } else {
                container.style.display = 'none';
                message.style.display = 'block';
                message.innerHTML = `
                    <div style="font-size: 60px; margin-bottom: 20px;">üè∑Ô∏è</div>
                    <h3>No products in ${categoryNames[category] || category} category</h3>
                    <p>Be the first to post in this category!</p>
                    ${currentUser && currentUser.type === 'seller' ? 
                        `<button class="btn btn-primary" onclick="showPostAdForm()" style="margin-top: 15px;">
                            <i class="fas fa-plus-circle"></i> Post an Ad
                        </button>` : 
                        `<button class="btn btn-primary" onclick="openAuthModal('login', 'seller')" style="margin-top: 15px;">
                            <i class="fas fa-sign-in-alt"></i> Login as Seller
                        </button>`
                    }
                `;
            }
        }
        
        // Show category
        function showCategory(categoryId) {
            showSection('home');
            filterProductsByCategory(categoryId);
            setActiveNav(categoryId);
        }
        
        // Show location
        function showLocation(locationId) {
            const products = BINGA_MARKETPLACE_DB.products.getActive()
                .filter(p => p.location === locationId);
            
            const container = document.getElementById('recentProducts');
            const message = document.getElementById('recentProductsMessage');
            
            if (products.length > 0) {
                message.style.display = 'none';
                container.style.display = 'grid';
                container.innerHTML = products.map(product => renderProductCard(product)).join('');
                
                // Update section title
                document.querySelector('#homeSection .section-title').innerHTML = `
                    <i class="fas fa-map-marker-alt"></i> Products in ${locationId}
                `;
            } else {
                container.style.display = 'none';
                message.style.display = 'block';
                message.innerHTML = `
                    <div style="font-size: 60px; margin-bottom: 20px;">üìç</div>
                    <h3>No products in ${locationId}</h3>
                    <p>Be the first to post in this location!</p>
                `;
            }
        }
        
        // Search products
        function searchProducts() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categorySelect').value;
            const location = document.getElementById('locationSelect').value;
            
            let products = BINGA_MARKETPLACE_DB.products.getActive();
            
            // Filter by search query
            if (query) {
                products = products.filter(p => 
                    p.title.toLowerCase().includes(query) || 
                    p.description.toLowerCase().includes(query)
                );
            }
            
            // Filter by category
            if (category) {
                products = products.filter(p => p.category === category);
            }
            
            // Filter by location
            if (location) {
                products = products.filter(p => p.location === location);
            }
            
            // Display results
            const container = document.getElementById('recentProducts');
            const message = document.getElementById('recentProductsMessage');
            
            if (products.length > 0) {
                message.style.display = 'none';
                container.style.display = 'grid';
                container.innerHTML = products.map(product => renderProductCard(product)).join('');
                
                // Update section title
                let title = 'Search Results';
                if (query || category || location) {
                    title = `${products.length} Product(s) Found`;
                }
                document.querySelector('#homeSection .section-title').innerHTML = `
                    <i class="fas fa-search"></i> ${title}
                `;
            } else {
                container.style.display = 'none';
                message.style.display = 'block';
                message.innerHTML = `
                    <div style="font-size: 60px; margin-bottom: 20px;">üîç</div>
                    <h3>No products found</h3>
                    <p>Try different search terms or filters</p>
                `;
            }
        }
        
        // Show post ad form
        function showPostAdForm() {
            if (!currentUser || currentUser.type !== 'seller') {
                openAuthModal('login', 'seller');
                return;
            }
            
            // Hide other sections
            document.getElementById('homeSection').style.display = 'none';
            document.getElementById('tourismSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'none';
            document.getElementById('adminSection').style.display = 'none';
            document.getElementById('addAttractionSection').style.display = 'none';
            document.getElementById('editAttractionSection').style.display = 'none';
            
            // Show post ad section
            document.getElementById('postAdSection').style.display = 'block';
            
            // Load post ad form
            document.getElementById('postAdForm').innerHTML = `
                <form id="adForm">
                    <div class="form-group">
                        <label class="form-label">Ad Title*</label>
                        <input type="text" class="form-control" id="adTitle" placeholder="e.g., Fresh Kapenta - 20kg">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Category*</label>
                        <select class="form-control" id="adCategory">
                            <option value="">Select Category</option>
                            <option value="fish">Fish & Seafood</option>
                            <option value="goat">Goats</option>
                            <option value="cow">Cattle</option>
                            <option value="poultry">Poultry</option>
                            <option value="agriculture">Agriculture</option>
                            <option value="services">Services</option>
                            <option value="property">Property</option>
                            <option value="vehicles">Vehicles</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Price (USD)*</label>
                        <input type="number" class="form-control" id="adPrice" placeholder="e.g., 80">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Location in Binga*</label>
                        <select class="form-control" id="adLocation">
                            <option value="">Select Location</option>
                            <option>Siachilaba</option>
                            <option>Kariyangwe</option>
                            <option>Binga Centre</option>
                            <option>Chete Island</option>
                            <option>Lake Kariba</option>
                            <option>Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Description*</label>
                        <textarea class="form-control" id="adDescription" rows="4" placeholder="Describe your product or service..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Contact Phone*</label>
                        <input type="tel" class="form-control" id="adPhone" value="${currentUser.phone}">
                        <small>Buyers will contact you on this number via WhatsApp</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Product Image URL (Optional)</label>
                        <input type="text" class="form-control" id="adImageUrl" placeholder="https://example.com/image.jpg">
                        <small>Enter a direct link to your product image</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Note to Administrator</label>
                        <textarea class="form-control" id="adNote" rows="2" placeholder="Any special notes for admin review..."></textarea>
                    </div>
                    
                    <button type="button" class="btn btn-primary" onclick="submitAd()" style="margin-top: 20px;">
                        <i class="fas fa-paper-plane"></i> Submit for Approval
                    </button>
                    
                    <button type="button" class="btn" onclick="showSection('dashboard')" style="margin-top: 20px; margin-left: 10px; background: #f0f0f0;">
                        Cancel
                    </button>
                    
                    <p style="margin-top: 20px; color: #666; font-size: 14px;">
                        <i class="fas fa-info-circle"></i> Note: All ads require administrator approval before appearing on marketplace.
                        Contact +263 77 286 3815 for faster approval.
                    </p>
                </form>
            `;
        }
        
        // Submit ad
        function submitAd() {
            const title = document.getElementById('adTitle').value.trim();
            const category = document.getElementById('adCategory').value;
            const price = document.getElementById('adPrice').value;
            const location = document.getElementById('adLocation').value;
            const description = document.getElementById('adDescription').value.trim();
            const phone = document.getElementById('adPhone').value.replace(/\D/g, '');
            const imageUrl = document.getElementById('adImageUrl').value.trim();
            const note = document.getElementById('adNote').value.trim();
            
            if (!title || !category || !price || !location || !description || !phone) {
                alert('Please fill all required fields');
                return;
            }
            
            if (phone.length < 9) {
                alert('Please enter a valid phone number');
                return;
            }
            
            // Create WhatsApp link
            const whatsappLink = `https://wa.me/${phone}?text=Hi! I saw your ${encodeURIComponent(title)} on Binga Marketplace`;
            
            // Add product
            const product = BINGA_MARKETPLACE_DB.products.add({
                title: title,
                description: description + (note ? `\n\nNote: ${note}` : ''),
                category: category,
                price: parseFloat(price),
                location: location,
                sellerId: currentUser.id,
                sellerName: currentUser.name,
                sellerPhone: phone,
                whatsappLink: whatsappLink,
                status: 'pending',
                adminNote: note || '',
                imageUrl: imageUrl || ''
            });
            
            // Update user's products
            BINGA_MARKETPLACE_DB.users.update(currentUser.id, {
                products: [...(currentUser.products || []), product.id]
            });
            
            // Update current user
            currentUser.products = [...(currentUser.products || []), product.id];
            localStorage.setItem('binga_current_user', JSON.stringify(currentUser));
            
            // Show success message
            showAlert('Ad submitted for approval! Administrator will review it shortly. Contact +263 77 286 3815 for faster approval.', 'success');
            
            // Clear form
            document.getElementById('adTitle').value = '';
            document.getElementById('adCategory').value = '';
            document.getElementById('adPrice').value = '';
            document.getElementById('adLocation').value = '';
            document.getElementById('adDescription').value = '';
            document.getElementById('adImageUrl').value = '';
            document.getElementById('adNote').value = '';
            
            // Go to dashboard
            showSection('dashboard');
        }
        
        // Load user dashboard
        function loadUserDashboard() {
            if (!currentUser) return;
            
            // Update stats
            const myProducts = BINGA_MARKETPLACE_DB.products.getBySeller(currentUser.id);
            const pendingProducts = myProducts.filter(p => !p.approved || p.status === 'pending');
            const activeProducts = myProducts.filter(p => p.status === 'active' && p.approved);
            const totalViews = myProducts.reduce((sum, p) => sum + (p.views || 0), 0);
            
            document.getElementById('myProductsCount').textContent = myProducts.length;
            document.getElementById('myViewsCount').textContent = totalViews;
            document.getElementById('myPendingCount').textContent = pendingProducts.length;
            document.getElementById('myActiveCount').textContent = activeProducts.length;
            
            // Load dashboard content
            const container = document.getElementById('userDashboard');
            
            container.innerHTML = `
                <div style="margin-bottom: 30px;">
                    <button class="btn btn-primary" onclick="showPostAdForm()">
                        <i class="fas fa-plus-circle"></i> Post New Ad
                    </button>
                </div>
                
                <h3>My Products (${myProducts.length})</h3>
                ${myProducts.length > 0 ? 
                    `<div class="products-grid" style="margin-top: 20px;">
                        ${myProducts.map(p => `
                            <div class="product-card">
                                <div class="product-image">
                                    ${p.imageUrl ? `<img src="${p.imageUrl}" alt="${p.title}">` : (p.category === 'fish' ? 'üêü' : p.category === 'goat' ? 'üêê' : 'üì¶')}
                                    <div class="product-price">$${p.price}</div>
                                </div>
                                <div class="product-details">
                                    <h3 class="product-title">${p.title}</h3>
                                    <p class="product-meta">Status: <span class="status-badge ${!p.approved ? 'status-pending' : p.status === 'active' ? 'status-active' : 'status-rejected'}">
                                        ${!p.approved ? 'Pending Approval' : p.status === 'active' ? 'Active' : 'Rejected'}
                                    </span></p>
                                    <p class="product-meta">Views: ${p.views || 0}</p>
                                    <div class="product-location">
                                        <i class="fas fa-map-marker-alt"></i> ${p.location}
                                    </div>
                                    <div class="action-buttons">
                                        ${!p.approved ? 
                                            `<button class="action-btn" style="background: #f0f0f0;" onclick="alert('Ad pending admin approval. Contact +263 77 286 3815')">
                                                <i class="fas fa-clock"></i> Awaiting Approval
                                            </button>` : ''
                                        }
                                        <button class="action-btn delete" onclick="deleteAd(${p.id})">
                                            <i class="fas fa-trash"></i> Delete
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>` :
                    `<div class="no-products" style="padding: 30px;">
                        <h3>You haven't posted any ads yet</h3>
                        <p>Start selling by posting your first ad</p>
                        <button class="btn btn-primary" onclick="showPostAdForm()" style="margin-top: 15px;">
                            <i class="fas fa-plus-circle"></i> Post Your First Ad
                        </button>
                    </div>`
                }
                
                <div style="margin-top: 40px; background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <h4><i class="fas fa-info-circle"></i> Important Information</h4>
                    <ul style="margin-top: 10px; color: #666;">
                        <li>All ads require administrator approval</li>
                        <li>Contact +263 77 286 3815 for faster approval</li>
                        <li>Approved ads appear on homepage immediately</li>
                        <li>Use clear descriptions and fair pricing</li>
                        <li>Add images to make your ads more attractive</li>
                    </ul>
                </div>
            `;
        }
        
        // Show admin tab
        function showAdminTab(tab) {
            // Update active tab
            document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            const container = document.getElementById('adminContent');
            
            if (tab === 'pending') {
                const pendingProducts = BINGA_MARKETPLACE_DB.products.getPending();
                const pendingUsers = BINGA_MARKETPLACE_DB.users.getAll()
                    .filter(u => u.type === 'seller' && u.approved === false);
                
                container.innerHTML = `
                    <h3><i class="fas fa-clock"></i> Pending Approvals</h3>
                    
                    <div style="margin-top: 30px;">
                        <h4>Pending Ads (${pendingProducts.length})</h4>
                        ${pendingProducts.length > 0 ? 
                            `<div class="products-grid" style="margin-top: 20px;">
                                ${pendingProducts.map(p => `
                                    <div class="product-card">
                                        <div class="product-image">
                                            ${p.imageUrl ? `<img src="${p.imageUrl}" alt="${p.title}">` : (p.category === 'fish' ? 'üêü' : p.category === 'goat' ? 'üêê' : 'üì¶')}
                                            <div class="product-price">$${p.price}</div>
                                        </div>
                                        <div class="product-details">
                                            <h3 class="product-title">${p.title}</h3>
                                            <p class="product-meta">${p.description.substring(0, 60)}...</p>
                                            <p class="product-meta">Seller: ${p.sellerName} (${p.sellerPhone})</p>
                                            ${p.adminNote ? `<p class="product-meta"><strong>Note:</strong> ${p.adminNote}</p>` : ''}
                                            <div class="product-location">
                                                <i class="fas fa-map-marker-alt"></i> ${p.location}
                                            </div>
                                            <div class="action-buttons">
                                                <button class="action-btn approve" onclick="approveAd(${p.id})">
                                                    <i class="fas fa-check"></i> Approve
                                                </button>
                                                <button class="action-btn reject" onclick="rejectAd(${p.id})">
                                                    <i class="fas fa-times"></i> Reject
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>` :
                            `<div style="padding: 30px; text-align: center; background: #f8f9fa; border-radius: 8px; margin-top: 20px;">
                                <p>No pending ads to review</p>
                            </div>`
                        }
                    </div>
                    
                    <div style="margin-top: 40px;">
                        <h4>Pending Seller Registrations (${pendingUsers.length})</h4>
                        ${pendingUsers.length > 0 ? 
                            `<div style="overflow-x: auto; margin-top: 20px;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background: #f8f9fa;">
                                            <th style="padding: 12px; text-align: left;">Name</th>
                                            <th style="padding: 12px; text-align: left;">Phone</th>
                                            <th style="padding: 12px; text-align: left;">Username</th>
                                            <th style="padding: 12px; text-align: left;">Location</th>
                                            <th style="padding: 12px; text-align: left;">Registered</th>
                                            <th style="padding: 12px; text-align: left;">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${pendingUsers.map(u => `
                                            <tr style="border-bottom: 1px solid #eee;">
                                                <td style="padding: 12px;">${u.name}</td>
                                                <td style="padding: 12px;">${u.phone}</td>
                                                <td style="padding: 12px;">${u.username}</td>
                                                <td style="padding: 12px;">${u.location}</td>
                                                <td style="padding: 12px;">${new Date(u.registered).toLocaleDateString()}</td>
                                                <td style="padding: 12px;">
                                                    <button class="action-btn approve" onclick="approveUser(${u.id})" style="padding: 5px 10px; font-size: 12px;">
                                                        Approve
                                                    </button>
                                                    <button class="action-btn reject" onclick="rejectUser(${u.id})" style="padding: 5px 10px; font-size: 12px;">
                                                        Reject
                                                    </button>
                                                </td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>` :
                            `<div style="padding: 30px; text-align: center; background: #f8f9fa; border-radius: 8px; margin-top: 20px;">
                                <p>No pending seller registrations</p>
                            </div>`
                        }
                    </div>
                `;
            } else if (tab === 'attractions') {
                const attractions = BINGA_MARKETPLACE_DB.attractions.getAll();
                
                container.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3><i class="fas fa-camera"></i> Tourist Attractions (${attractions.length})</h3>
                        <button class="btn btn-primary" onclick="showAddAttractionForm()">
                            <i class="fas fa-plus"></i> Add New Attraction
                        </button>
                    </div>
                    
                    ${attractions.length > 0 ? 
                        `<div class="products-grid" style="margin-top: 20px;">
                            ${attractions.map(a => `
                                <div class="attraction-card">
                                    <div class="attraction-image">
                                        ${a.imageUrl ? `<img src="${a.imageUrl}" alt="${a.name}">` : (a.type === 'beach' ? 'üèñÔ∏è' : a.type === 'hotspring' ? '‚ô®Ô∏è' : 'üèûÔ∏è')}
                                        <div class="attraction-type">${a.typeName || a.type}</div>
                                    </div>
                                    <div class="product-details">
                                        <h3 class="product-title">${a.name}</h3>
                                        <p class="product-meta">${a.description.substring(0, 60)}...</p>
                                        <div class="product-location">
                                            <i class="fas fa-map-marker-alt"></i> ${a.location}
                                        </div>
                                        <div class="action-buttons">
                                            <button class="action-btn edit" onclick="editAttraction(${a.id})">
                                                <i class="fas fa-edit"></i> Edit
                                            </button>
                                            <button class="action-btn delete" onclick="deleteAttraction(${a.id})">
                                                <i class="fas fa-trash"></i> Delete
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>` :
                        `<div class="no-products" style="padding: 30px;">
                            <div style="font-size: 60px; margin-bottom: 20px;">üèûÔ∏è</div>
                            <h3>No tourist attractions added yet</h3>
                            <p>Add Binga's beautiful attractions to showcase them to visitors</p>
                            <button class="btn btn-primary" onclick="showAddAttractionForm()" style="margin-top: 15px;">
                                <i class="fas fa-plus-circle"></i> Add First Attraction
                            </button>
                        </div>`
                    }
                `;
            }
        }
        
        // Admin: Approve ad
        function approveAd(productId) {
            BINGA_MARKETPLACE_DB.products.update(productId, {
                status: 'active',
                approved: true,
                approvedAt: new Date().toISOString(),
                approvedBy: currentUser.id
            });
            
            showAlert('Ad approved successfully! It is now visible in the marketplace.', 'success');
            showAdminTab('pending');
            loadMarketplace();
            loadCategories();
            loadLocations();
        }
        
        // Admin: Reject ad
        function rejectAd(productId) {
            if (confirm('Are you sure you want to reject this ad?')) {
                BINGA_MARKETPLACE_DB.products.delete(productId);
                showAlert('Ad rejected and removed', 'success');
                showAdminTab('pending');
            }
        }
        
        // Admin: Approve user
        function approveUser(userId) {
            BINGA_MARKETPLACE_DB.users.update(userId, {
                approved: true,
                status: 'active'
            });
            
            showAlert('User approved successfully! They can now login and post ads.', 'success');
            showAdminTab('pending');
        }
        
        // Admin: Reject user
        function rejectUser(userId) {
            if (confirm('Are you sure you want to reject this user registration?')) {
                BINGA_MARKETPLACE_DB.users.delete(userId);
                showAlert('User registration rejected and removed', 'success');
                showAdminTab('pending');
            }
        }
        
        // User: Delete ad
        function deleteAd(productId) {
            if (confirm('Are you sure you want to delete this ad?')) {
                BINGA_MARKETPLACE_DB.products.delete(productId);
                showAlert('Ad deleted successfully', 'success');
                loadUserDashboard();
                loadMarketplace();
                loadCategories();
                loadLocations();
            }
        }
        
        // Admin: Edit attraction
        function editAttraction(attractionId) {
            const attraction = BINGA_MARKETPLACE_DB.attractions.findById(attractionId);
            if (!attraction) {
                alert('Attraction not found');
                return;
            }
            
            // Hide other sections
            document.getElementById('homeSection').style.display = 'none';
            document.getElementById('tourismSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'none';
            document.getElementById('adminSection').style.display = 'none';
            document.getElementById('postAdSection').style.display = 'none';
            document.getElementById('addAttractionSection').style.display = 'none';
            
            // Show edit attraction section
            document.getElementById('editAttractionSection').style.display = 'block';
            
            // Load edit attraction form
            const attractionTypes = JSON.parse(localStorage.getItem('binga_marketplace_attraction_types')) || [];
            
            document.getElementById('editAttractionForm').innerHTML = `
                <form id="editAttractionFormContent">
                    <div class="form-group">
                        <label class="form-label">Attraction Name*</label>
                        <input type="text" class="form-control" id="editAttractionName" value="${attraction.name}" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Attraction Type*</label>
                        <select class="form-control" id="editAttractionType" required>
                            <option value="">Select Type</option>
                            ${attractionTypes.map(type => `
                                <option value="${type.id}" ${attraction.type === type.id ? 'selected' : ''}>${type.name}</option>
                            `).join('')}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Location*</label>
                        <input type="text" class="form-control" id="editAttractionLocation" value="${attraction.location}" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Description*</label>
                        <textarea class="form-control" id="editAttractionDescription" rows="4" required>${attraction.description}</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Contact Number for Bookings*</label>
                        <input type="tel" class="form-control" id="editAttractionContact" value="${attraction.contact}" required>
                        <small>This number will be linked to WhatsApp for bookings</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Image URL</label>
                        <input type="text" class="form-control" id="editAttractionImageUrl" value="${attraction.imageUrl || ''}" placeholder="https://example.com/image.jpg">
                        <small>Enter a direct link to an image of the attraction</small>
                    </div>
                    
                    ${attraction.imageUrl ? `
                        <div class="form-group">
                            <label class="form-label">Current Image Preview</label>
                            <div>
                                <img src="${attraction.imageUrl}" alt="${attraction.name}" class="uploaded-image">
                            </div>
                        </div>
                    ` : ''}
                    
                    <div class="action-buttons">
                        <button type="button" class="action-btn approve" onclick="updateAttraction(${attractionId})">
                            <i class="fas fa-save"></i> Update Attraction
                        </button>
                        <button type="button" class="action-btn" onclick="showAdminTab('attractions'); showSection('admin')" style="background: #f0f0f0;">
                            Cancel
                        </button>
                    </div>
                </form>
            `;
        }
        
        // Update attraction
        function updateAttraction(attractionId) {
            const name = document.getElementById('editAttractionName').value.trim();
            const type = document.getElementById('editAttractionType').value;
            const location = document.getElementById('editAttractionLocation').value.trim();
            const description = document.getElementById('editAttractionDescription').value.trim();
            const contact = document.getElementById('editAttractionContact').value.replace(/\D/g, '');
            const imageUrl = document.getElementById('editAttractionImageUrl').value.trim();
            
            if (!name || !type || !location || !description || !contact) {
                alert('Please fill all required fields');
                return;
            }
            
            // Get type name
            const attractionTypes = JSON.parse(localStorage.getItem('binga_marketplace_attraction_types')) || [];
            const typeObj = attractionTypes.find(t => t.id === type);
            const typeName = typeObj ? typeObj.name : type;
            
            // Update attraction
            BINGA_MARKETPLACE_DB.attractions.update(attractionId, {
                name: name,
                type: type,
                typeName: typeName,
                location: location,
                description: description,
                contact: contact,
                imageUrl: imageUrl,
                whatsappLink: `https://wa.me/${contact}?text=Hi! I want to book a tour to ${encodeURIComponent(name)} from Binga Marketplace`,
                updatedAt: new Date().toISOString(),
                updatedBy: currentUser.id
            });
            
            // Show success message
            showAlert('Tourist attraction updated successfully!', 'success');
            
            // Go back to admin attractions tab
            showSection('admin');
            showAdminTab('attractions');
            loadTouristAttractions();
            if (document.getElementById('tourismSection').style.display !== 'none') {
                loadTourismContent();
            }
        }
        
        // Admin: Delete attraction
        function deleteAttraction(attractionId) {
            if (confirm('Are you sure you want to delete this tourist attraction?')) {
                BINGA_MARKETPLACE_DB.attractions.delete(attractionId);
                showAlert('Tourist attraction deleted', 'success');
                showAdminTab('attractions');
                loadTouristAttractions();
                if (document.getElementById('tourismSection').style.display !== 'none') {
                    loadTourismContent();
                }
            }
        }
        
        // Show add tourist attraction form
        function showAddAttractionForm() {
            if (!currentUser || currentUser.type !== 'admin') {
                alert('Admin access required');
                return;
            }
            
            // Hide other sections
            document.getElementById('homeSection').style.display = 'none';
            document.getElementById('tourismSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'none';
            document.getElementById('adminSection').style.display = 'none';
            document.getElementById('postAdSection').style.display = 'none';
            document.getElementById('editAttractionSection').style.display = 'none';
            
            // Show add attraction section
            document.getElementById('addAttractionSection').style.display = 'block';
            
            // Load add attraction form
            const attractionTypes = JSON.parse(localStorage.getItem('binga_marketplace_attraction_types')) || [];
            
            document.getElementById('addAttractionForm').innerHTML = `
                <form id="attractionForm">
                    <div class="form-group">
                        <label class="form-label">Attraction Name*</label>
                        <input type="text" class="form-control" id="attractionName" placeholder="e.g., Binga Beach, Hot Springs, etc.">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Attraction Type*</label>
                        <select class="form-control" id="attractionType">
                            <option value="">Select Type</option>
                            ${attractionTypes.map(type => `
                                <option value="${type.id}">${type.name}</option>
                            `).join('')}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Location*</label>
                        <input type="text" class="form-control" id="attractionLocation" placeholder="e.g., Binga Beach, Siachilaba Hot Springs">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Description*</label>
                        <textarea class="form-control" id="attractionDescription" rows="4" placeholder="Describe the attraction..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Contact Number for Bookings*</label>
                        <input type="tel" class="form-control" id="attractionContact" value="263772863815">
                        <small>This number will be linked to WhatsApp for bookings</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Image URL (Optional)</label>
                        <input type="text" class="form-control" id="attractionImageUrl" placeholder="https://example.com/image.jpg">
                        <small>Enter a direct link to an image of the attraction</small>
                    </div>
                    
                    <div class="action-buttons">
                        <button type="button" class="action-btn approve" onclick="submitAttraction()">
                            <i class="fas fa-plus-circle"></i> Add Attraction
                        </button>
                        <button type="button" class="action-btn" onclick="showAdminTab('attractions'); showSection('admin')" style="background: #f0f0f0;">
                            Cancel
                        </button>
                    </div>
                </form>
            `;
        }
        
        // Submit tourist attraction
        function submitAttraction() {
            const name = document.getElementById('attractionName').value.trim();
            const type = document.getElementById('attractionType').value;
            const location = document.getElementById('attractionLocation').value.trim();
            const description = document.getElementById('attractionDescription').value.trim();
            const contact = document.getElementById('attractionContact').value.replace(/\D/g, '');
            const imageUrl = document.getElementById('attractionImageUrl').value.trim();
            
            if (!name || !type || !location || !description || !contact) {
                alert('Please fill all required fields');
                return;
            }
            
            // Get type name
            const attractionTypes = JSON.parse(localStorage.getItem('binga_marketplace_attraction_types')) || [];
            const typeObj = attractionTypes.find(t => t.id === type);
            const typeName = typeObj ? typeObj.name : type;
            
            // Create WhatsApp link
            const whatsappLink = `https://wa.me/${contact}?text=Hi! I want to book a tour to ${encodeURIComponent(name)} from Binga Marketplace`;
            
            // Add attraction
            BINGA_MARKETPLACE_DB.attractions.add({
                name: name,
                type: type,
                typeName: typeName,
                location: location,
                description: description,
                contact: contact,
                imageUrl: imageUrl,
                whatsappLink: whatsappLink,
                addedBy: currentUser.id,
                addedByName: currentUser.name
            });
            
            // Show success message
            showAlert('Tourist attraction added successfully! It is now visible on the home page.', 'success');
            
            // Go back to admin attractions tab
            showSection('admin');
            showAdminTab('attractions');
        }
        
        // Show alert
        function showAlert(message, type) {
            // Remove any existing alerts
            const existingAlerts = document.querySelectorAll('.alert');
            existingAlerts.forEach(alert => alert.remove());
            
            // Create alert element
            const alertEl = document.createElement('div');
            alertEl.className = `alert alert-${type}`;
            alertEl.innerHTML = `
                ${message}
                <button onclick="this.parentElement.remove()" style="float: right; background: none; border: none; font-size: 20px; cursor: pointer;">√ó</button>
            `;
            
            // Insert at top of main content
            const mainContent = document.getElementById('mainContent');
            mainContent.insertBefore(alertEl, mainContent.firstChild);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (alertEl.parentElement) {
                    alertEl.remove();
                }
            }, 5000);
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('authModal');
            if (event.target === modal) {
                closeAuthModal();
            }
        };
        
        // Initialize app when page loads
        window.onload = initApp;
    </script>
</body>
</html>
