<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binga Marketplace - Buy & Sell Fish, Livestock, Goods</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a5276;
            --secondary: #d4ac0d;
            --accent: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #f8f9fa;
            --dark: #333333;
            --border: #e0e0e0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        /* Header */
        .site-header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-top {
            background: var(--primary);
            color: white;
            padding: 8px 0;
            font-size: 14px;
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-top .header-container {
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: var(--primary);
        }
        
        .logo-icon {
            font-size: 32px;
            color: var(--secondary);
        }
        
        .logo-text h1 {
            font-size: 24px;
            font-weight: 700;
        }
        
        .logo-text span {
            font-size: 12px;
            color: #666;
        }
        
        /* Auth in top-right corner */
        .auth-container {
            position: relative;
        }
        
        .auth-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .auth-btn {
            padding: 8px 20px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            font-size: 14px;
        }
        
        .auth-btn.login {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        
        .auth-btn.register {
            background: var(--primary);
            color: white;
        }
        
        .auth-btn.logout {
            background: var(--danger);
            color: white;
        }
        
        .user-menu {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .user-name {
            font-weight: 600;
            color: var(--dark);
        }
        
        /* Auth Modal */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .auth-modal-content {
            background: white;
            border-radius: 8px;
            width: 400px;
            max-width: 90%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .auth-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
        }
        
        .auth-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
        }
        
        .auth-tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
        }
        
        .auth-form {
            padding: 30px;
        }
        
        .auth-form h3 {
            margin-bottom: 20px;
            color: var(--dark);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 16px;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            font-size: 16px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
            width: 100%;
        }
        
        .btn-primary:hover {
            background: #154360;
        }
        
        /* Navigation */
        .main-nav {
            background: white;
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
        }
        
        .nav-link {
            padding: 15px 20px;
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            border-bottom: 3px solid transparent;
        }
        
        .nav-link:hover, .nav-link.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .post-ad-btn {
            margin-left: auto;
            background: var(--accent);
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 600;
        }
        
        /* Main Content */
        .main-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }
        
        /* Sidebar */
        .sidebar {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .sidebar-section {
            margin-bottom: 30px;
        }
        
        .sidebar-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark);
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }
        
        .category-list, .location-list {
            list-style: none;
        }
        
        .category-item, .location-item {
            padding: 8px 0;
            border-bottom: 1px solid #f5f5f5;
        }
        
        .category-item a, .location-item a {
            text-decoration: none;
            color: #555;
            display: flex;
            justify-content: space-between;
        }
        
        .category-item a:hover, .location-item a:hover {
            color: var(--primary);
        }
        
        .category-count, .location-count {
            background: #f0f0f0;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
        }
        
        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .product-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .product-image {
            height: 180px;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 48px;
            position: relative;
        }
        
        .product-price {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .product-details {
            padding: 15px;
        }
        
        .product-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
            font-size: 16px;
            line-height: 1.4;
        }
        
        .product-meta {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        
        .product-location {
            font-size: 12px;
            color: #999;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .whatsapp-btn {
            background: #25D366;
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            font-weight: 600;
            margin-top: 10px;
        }
        
        /* Search Bar */
        .search-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .search-box {
            display: flex;
            gap: 10px;
        }
        
        .search-input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 16px;
        }
        
        .search-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0 30px;
            cursor: pointer;
            font-weight: 600;
        }
        
        /* Footer */
        .site-footer {
            background: var(--dark);
            color: white;
            margin-top: 50px;
            padding: 40px 0;
        }
        
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        
        .footer-section h3 {
            font-size: 18px;
            margin-bottom: 20px;
            color: white;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #bbb;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        /* Dashboard (when logged in) */
        .dashboard-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        .dashboard-header {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        /* Admin Panel */
        .admin-panel {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .admin-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
        }
        
        .admin-tab {
            padding: 15px 30px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .admin-tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .nav-container {
                flex-direction: column;
                padding: 10px;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .post-ad-btn {
                margin: 10px 0 0 0;
            }
            
            .header-container {
                flex-direction: column;
                gap: 15px;
                padding: 15px 20px;
            }
            
            .auth-buttons {
                width: 100%;
                justify-content: center;
            }
        }
        
        /* Verification badge */
        .verified-badge {
            background: var(--accent);
            color: white;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }
        
        /* No products message */
        .no-products {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 8px;
            grid-column: 1 / -1;
        }
        
        /* Featured Products */
        .featured-products {
            margin-bottom: 40px;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Alert */
        .alert {
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        /* Welcome Message */
        .welcome-message {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 40px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 40px;
        }
        
        .welcome-message h2 {
            font-size: 32px;
            margin-bottom: 15px;
        }
        
        .welcome-message p {
            font-size: 18px;
            max-width: 800px;
            margin: 0 auto 25px;
        }
        
        .cta-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }
        
        .cta-button {
            padding: 15px 30px;
            background: white;
            color: var(--primary);
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            font-size: 16px;
        }
        
        .cta-button.secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }
        
        /* How it works */
        .how-it-works {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }
        
        .step-card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .step-number {
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            margin: 0 auto 20px;
        }
        
        .step-card h3 {
            margin-bottom: 15px;
            color: var(--dark);
        }
    </style>
</head>
<body>
    <!-- Top Bar -->
    <div class="header-top">
        <div class="header-container">
            <div>
                <i class="fas fa-phone-alt"></i> +263 77 123 4567 | 
                <i class="fas fa-map-marker-alt"></i> Binga, Lake Kariba
            </div>
            <div>
                <i class="fab fa-whatsapp"></i> WhatsApp: +263 78 456 7890
            </div>
        </div>
    </div>
    
    <!-- Main Header -->
    <header class="site-header">
        <div class="header-container">
            <!-- Logo -->
            <a href="#" class="logo">
                <div class="logo-icon">üêü</div>
                <div class="logo-text">
                    <h1>Binga Marketplace</h1>
                    <span>Buy & Sell Fish, Livestock & More</span>
                </div>
            </a>
            
            <!-- Auth Section (Top Right Corner) -->
            <div class="auth-container">
                <div class="auth-buttons" id="authButtons">
                    <!-- Will be populated by JavaScript -->
                </div>
                
                <!-- User Menu (shown when logged in) -->
                <div class="user-menu" id="userMenu" style="display: none;">
                    <div class="user-avatar" id="userAvatar">JD</div>
                    <div>
                        <div class="user-name" id="userName">John Doe</div>
                        <button class="auth-btn logout" onclick="logout()">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" onclick="showSection('home')">Home</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('fish')">Fish</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('livestock')">Livestock</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('agriculture')">Agriculture</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('services')">Services</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('property')">Property</a></li>
                <li><a href="#" class="nav-link" onclick="showSection('vehicles')">Vehicles</a></li>
            </ul>
            
            <a href="#" class="post-ad-btn" onclick="showPostAdForm()">
                <i class="fas fa-plus-circle"></i> Post Free Ad
            </a>
        </div>
    </nav>
    
    <!-- Main Content -->
    <div id="mainContent">
        <!-- Home/Marketplace Section (Default) -->
        <div id="homeSection">
            <!-- Welcome Message -->
            <div class="welcome-message">
                <h2>Welcome to Binga Marketplace!</h2>
                <p>The first digital marketplace for Binga community. Buy and sell fish, livestock, agricultural products, and services directly with your neighbors.</p>
                
                <div class="cta-buttons">
                    <a href="#" class="cta-button" onclick="showPostAdForm()">
                        <i class="fas fa-plus-circle"></i> Post Your First Ad
                    </a>
                    <a href="#" class="cta-button secondary" onclick="openAuthModal('register')">
                        <i class="fas fa-user-plus"></i> Register Now
                    </a>
                </div>
            </div>
            
            <!-- How It Works -->
            <div>
                <h2 class="section-title">
                    <i class="fas fa-play-circle"></i> How It Works
                </h2>
                
                <div class="how-it-works">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <h3>Register & Post</h3>
                        <p>Create your free account and post your products or services with photos and details</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <h3>Admin Approval</h3>
                        <p>Our team verifies your listing to ensure quality and safety for all users</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <h3>Buyers Contact You</h3>
                        <p>Verified buyers contact you directly via WhatsApp to discuss purchases</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">4</div>
                        <h3>Sell & Earn</h3>
                        <p>Complete the sale and earn money from your products or services</p>
                    </div>
                </div>
            </div>
            
            <!-- Search Bar -->
            <div class="search-container">
                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" placeholder="What are you looking for?">
                    <select class="form-control" id="categorySelect" style="max-width: 200px;">
                        <option value="">All Categories</option>
                        <option value="fish">Fish</option>
                        <option value="goat">Goats</option>
                        <option value="cow">Cattle</option>
                        <option value="poultry">Poultry</option>
                        <option value="agriculture">Agriculture</option>
                    </select>
                    <select class="form-control" id="locationSelect" style="max-width: 200px;">
                        <option value="">All Locations</option>
                        <option value="Siachilaba">Siachilaba</option>
                        <option value="Kariyangwe">Kariyangwe</option>
                        <option value="Binga Centre">Binga Centre</option>
                        <option value="Chete Island">Chete Island</option>
                    </select>
                    <button class="search-btn" onclick="searchProducts()">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>
            </div>
            
            <!-- Featured Products -->
            <div class="featured-products">
                <h2 class="section-title">
                    <i class="fas fa-fire"></i> Marketplace Listings
                </h2>
                
                <div id="marketplaceMessage" class="no-products">
                    <div style="font-size: 60px; margin-bottom: 20px;">üè™</div>
                    <h3>Marketplace is Empty</h3>
                    <p>No products have been listed yet. Be the first to post!</p>
                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="showPostAdForm()" style="margin: 10px;">
                            <i class="fas fa-plus-circle"></i> Post Your First Ad
                        </button>
                        <button class="btn" onclick="openAuthModal('register')" style="margin: 10px; background: #f0f0f0;">
                            <i class="fas fa-user-plus"></i> Register Now
                        </button>
                    </div>
                </div>
                
                <div class="products-grid" id="featuredProducts" style="display: none;">
                    <!-- Products will be loaded here when available -->
                </div>
            </div>
            
            <!-- Recent Products -->
            <div class="main-container">
                <!-- Sidebar -->
                <aside class="sidebar">
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">Categories</h3>
                        <ul class="category-list" id="categoryList">
                            <!-- Categories will be loaded here -->
                        </ul>
                    </div>
                    
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">Locations</h3>
                        <ul class="location-list" id="locationList">
                            <!-- Locations will be loaded here -->
                        </ul>
                    </div>
                    
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">Sell Fast Tips</h3>
                        <ul style="list-style: none; color: #666; font-size: 14px;">
                            <li style="margin-bottom: 10px;">‚úÖ Use clear photos</li>
                            <li style="margin-bottom: 10px;">‚úÖ Set fair prices</li>
                            <li style="margin-bottom: 10px;">‚úÖ Include WhatsApp number</li>
                            <li style="margin-bottom: 10px;">‚úÖ Be honest about condition</li>
                            <li>‚úÖ Respond quickly to buyers</li>
                        </ul>
                    </div>
                </aside>
                
                <!-- Products Grid -->
                <div>
                    <h2 class="section-title">
                        <i class="fas fa-clock"></i> Recent Listings
                    </h2>
                    
                    <div class="products-grid" id="recentProducts" style="display: none;">
                        <!-- Recent products will be loaded here -->
                    </div>
                    
                    <div id="recentProductsMessage" class="no-products">
                        <div style="font-size: 60px; margin-bottom: 20px;">üì¶</div>
                        <h3>No Recent Listings</h3>
                        <p>Check back soon or be the first to post!</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Dashboard Section (for logged in users) -->
        <div id="dashboardSection" class="dashboard-container" style="display: none;">
            <div class="dashboard-header">
                <h2>My Dashboard</h2>
                <p>Manage your products and account</p>
            </div>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-number" id="myProductsCount">0</div>
                    <div>My Products</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="myViewsCount">0</div>
                    <div>Total Views</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="myMessagesCount">0</div>
                    <div>Messages</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="myRating">0.0</div>
                    <div>My Rating</div>
                </div>
            </div>
            
            <div class="admin-panel" id="userDashboard">
                <!-- User dashboard content will be loaded here -->
            </div>
        </div>
        
        <!-- Admin Panel Section -->
        <div id="adminSection" class="dashboard-container" style="display: none;">
            <div class="dashboard-header">
                <h2><i class="fas fa-crown"></i> Admin Control Panel</h2>
                <p>Manage the entire marketplace</p>
            </div>
            
            <div class="admin-panel">
                <div class="admin-tabs">
                    <div class="admin-tab active" onclick="showAdminTab('pending')">Pending Ads</div>
                    <div class="admin-tab" onclick="showAdminTab('reported')">Reported Ads</div>
                    <div class="admin-tab" onclick="showAdminTab('users')">Users</div>
                    <div class="admin-tab" onclick="showAdminTab('stats')">Statistics</div>
                </div>
                
                <div id="adminContent">
                    <!-- Admin content will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Post Ad Form -->
        <div id="postAdSection" class="dashboard-container" style="display: none;">
            <div class="dashboard-header">
                <h2>Post Free Advertisement</h2>
                <p>Reach thousands of buyers in Binga</p>
            </div>
            
            <div class="admin-panel">
                <div id="postAdForm">
                    <!-- Post ad form will be loaded here -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-section">
                <h3>Binga Marketplace</h3>
                <p>The first online marketplace in Binga. Buy and sell fish, livestock, agricultural products, services, and more.</p>
                <p style="margin-top: 15px;">
                    <i class="fas fa-phone"></i> +263 77 123 4567<br>
                    <i class="fas fa-envelope"></i> info@bingamarket.co.zw
                </p>
            </div>
            
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#" onclick="showSection('home')">Home</a></li>
                    <li><a href="#" onclick="showSection('fish')">Fish Market</a></li>
                    <li><a href="#" onclick="showSection('livestock')">Livestock</a></li>
                    <li><a href="#" onclick="showSection('services')">Services</a></li>
                    <li><a href="#" onclick="showPostAdForm()">Post Free Ad</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Help & Support</h3>
                <ul class="footer-links">
                    <li><a href="#" onclick="alert('FAQs coming soon')">FAQs</a></li>
                    <li><a href="#" onclick="alert('Safety tips coming soon')">Safety Tips</a></li>
                    <li><a href="#" onclick="alert('Contact us at +263 77 123 4567')">Contact Us</a></li>
                    <li><a href="#" onclick="alert('Terms & Conditions coming soon')">Terms & Conditions</a></li>
                    <li><a href="#" onclick="alert('Privacy Policy coming soon')">Privacy Policy</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Follow Us</h3>
                <div style="display: flex; gap: 15px; margin-top: 15px;">
                    <a href="#" style="color: white; font-size: 24px;"><i class="fab fa-facebook"></i></a>
                    <a href="#" style="color: white; font-size: 24px;"><i class="fab fa-whatsapp"></i></a>
                    <a href="#" style="color: white; font-size: 24px;"><i class="fab fa-twitter"></i></a>
                </div>
                <p style="margin-top: 20px; color: #bbb; font-size: 14px;">
                    ¬© 2024 Binga Marketplace. All rights reserved.
                </p>
            </div>
        </div>
    </footer>
    
    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-modal-content">
            <div class="auth-tabs">
                <div class="auth-tab active" onclick="showAuthForm('login')">Login</div>
                <div class="auth-tab" onclick="showAuthForm('register')">Register</div>
            </div>
            
            <div class="auth-form">
                <div id="loginForm">
                    <h3>Login to Your Account</h3>
                    <div class="form-group">
                        <label class="form-label">Email or Phone</label>
                        <input type="text" class="form-control" id="loginEmail" placeholder="Email or phone number">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" id="loginPassword" placeholder="Password">
                    </div>
                    <button class="btn btn-primary" onclick="login()">Login</button>
                    <p style="text-align: center; margin-top: 15px; color: #666;">
                        <a href="#" style="color: var(--primary);" onclick="alert('Please contact admin to reset password')">Forgot Password?</a>
                    </p>
                </div>
                
                <div id="registerForm" style="display: none;">
                    <h3>Create New Account</h3>
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="registerName" placeholder="Full name">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-control" id="registerPhone" placeholder="+263 77 123 4567">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email (Optional)</label>
                        <input type="email" class="form-control" id="registerEmail" placeholder="Email address">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" id="registerPassword" placeholder="Create password">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Location in Binga</label>
                        <select class="form-control" id="registerLocation">
                            <option value="">Select Location</option>
                            <option>Siachilaba</option>
                            <option>Kariyangwe</option>
                            <option>Binga Centre</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="register()">Create Account</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Database for storing users and products - NO SAMPLE DATA
        const BINGA_MARKETPLACE_DB = {
            // Initialize local storage databases
            init: function() {
                // Initialize users database
                if (!localStorage.getItem('binga_marketplace_users')) {
                    // Create default admin user only
                    const defaultUsers = [
                        {
                            id: 1,
                            username: 'Munkuli$1996',
                            password: 'PickGod',
                            name: 'Administrator',
                            phone: '+263771234567',
                            email: 'admin@bingamarket.co.zw',
                            location: 'Binga Centre',
                            type: 'admin',
                            registered: new Date().toISOString(),
                            products: [],
                            rating: 5.0
                        }
                    ];
                    localStorage.setItem('binga_marketplace_users', JSON.stringify(defaultUsers));
                }
                
                // Initialize products database - EMPTY
                if (!localStorage.getItem('binga_marketplace_products')) {
                    localStorage.setItem('binga_marketplace_products', JSON.stringify([]));
                }
                
                // Initialize categories
                if (!localStorage.getItem('binga_marketplace_categories')) {
                    const categories = [
                        {id: 'fish', name: 'Fish & Seafood', icon: 'üêü'},
                        {id: 'goat', name: 'Goats', icon: 'üêê'},
                        {id: 'cow', name: 'Cattle', icon: 'üêÑ'},
                        {id: 'poultry', name: 'Poultry', icon: 'üêì'},
                        {id: 'agriculture', name: 'Agriculture', icon: 'üåæ'},
                        {id: 'services', name: 'Services', icon: 'üîß'},
                        {id: 'property', name: 'Property', icon: 'üè†'},
                        {id: 'vehicles', name: 'Vehicles', icon: 'üöó'}
                    ];
                    localStorage.setItem('binga_marketplace_categories', JSON.stringify(categories));
                }
                
                // Initialize locations
                if (!localStorage.getItem('binga_marketplace_locations')) {
                    const locations = [
                        {id: 'Siachilaba', name: 'Siachilaba'},
                        {id: 'Kariyangwe', name: 'Kariyangwe'},
                        {id: 'Binga Centre', name: 'Binga Centre'},
                        {id: 'Chete Island', name: 'Chete Island'},
                        {id: 'Other', name: 'Other Areas'}
                    ];
                    localStorage.setItem('binga_marketplace_locations', JSON.stringify(locations));
                }
            },
            
            // User operations
            users: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('binga_marketplace_users')) || [];
                },
                
                add: function(user) {
                    const users = this.getAll();
                    const newUser = {
                        id: Date.now(),
                        ...user,
                        registered: new Date().toISOString(),
                        products: [],
                        rating: 0
                    };
                    users.push(newUser);
                    localStorage.setItem('binga_marketplace_users', JSON.stringify(users));
                    return newUser;
                },
                
                find: function(username) {
                    const users = this.getAll();
                    return users.find(u => u.username === username);
                },
                
                findById: function(id) {
                    const users = this.getAll();
                    return users.find(u => u.id === id);
                },
                
                update: function(id, updates) {
                    const users = this.getAll();
                    const index = users.findIndex(u => u.id === id);
                    if (index !== -1) {
                        users[index] = {...users[index], ...updates};
                        localStorage.setItem('binga_marketplace_users', JSON.stringify(users));
                    }
                }
            },
            
            // Product operations
            products: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('binga_marketplace_products')) || [];
                },
                
                getActive: function() {
                    return this.getAll().filter(p => p.status === 'active');
                },
                
                getByCategory: function(category) {
                    return this.getActive().filter(p => p.category === category);
                },
                
                getBySeller: function(sellerId) {
                    return this.getAll().filter(p => p.sellerId === sellerId);
                },
                
                add: function(product) {
                    const products = this.getAll();
                    const newProduct = {
                        id: Date.now(),
                        ...product,
                        views: 0,
                        status: 'pending', // pending, active, sold, removed
                        verified: false,
                        createdAt: new Date().toISOString()
                    };
                    products.push(newProduct);
                    localStorage.setItem('binga_marketplace_products', JSON.stringify(products));
                    return newProduct;
                },
                
                update: function(id, updates) {
                    const products = this.getAll();
                    const index = products.findIndex(p => p.id === id);
                    if (index !== -1) {
                        products[index] = {...products[index], ...updates};
                        localStorage.setItem('binga_marketplace_products', JSON.stringify(products));
                    }
                },
                
                delete: function(id) {
                    const products = this.getAll();
                    const filtered = products.filter(p => p.id !== id);
                    localStorage.setItem('binga_marketplace_products', JSON.stringify(filtered));
                }
            },
            
            // Category operations
            categories: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('binga_marketplace_categories')) || [];
                }
            },
            
            // Location operations
            locations: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('binga_marketplace_locations')) || [];
                }
            }
        };
        
        // Initialize database
        BINGA_MARKETPLACE_DB.init();
        
        // Current user state
        let currentUser = null;
        
        // Initialize the application
        function initApp() {
            // Check if user is already logged in
            const savedUser = localStorage.getItem('binga_current_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateAuthUI();
            } else {
                showAuthButtons();
            }
            
            // Load marketplace data
            loadMarketplace();
            loadCategories();
            loadLocations();
            
            // Set active navigation
            setActiveNav('home');
        }
        
        // Show auth buttons (login/register)
        function showAuthButtons() {
            document.getElementById('authButtons').innerHTML = `
                <button class="auth-btn login" onclick="openAuthModal()">Login</button>
                <button class="auth-btn register" onclick="openAuthModal('register')">Register</button>
            `;
            document.getElementById('userMenu').style.display = 'none';
        }
        
        // Update auth UI after login
        function updateAuthUI() {
            if (currentUser) {
                document.getElementById('authButtons').style.display = 'none';
                document.getElementById('userMenu').style.display = 'flex';
                
                // Set user info
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userAvatar').textContent = 
                    currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase();
                
                // Update user dashboard if visible
                if (document.getElementById('dashboardSection').style.display !== 'none') {
                    loadUserDashboard();
                }
            } else {
                showAuthButtons();
            }
        }
        
        // Open auth modal
        function openAuthModal(form = 'login') {
            document.getElementById('authModal').style.display = 'flex';
            showAuthForm(form);
        }
        
        // Close auth modal
        function closeAuthModal() {
            document.getElementById('authModal').style.display = 'none';
        }
        
        // Show login or register form
        function showAuthForm(form) {
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const tabs = document.querySelectorAll('.auth-tab');
            
            if (form === 'login') {
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                tabs[0].classList.add('active');
                tabs[1].classList.remove('active');
            } else {
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
                tabs[0].classList.remove('active');
                tabs[1].classList.add('active');
            }
        }
        
        // Login function
        function login() {
            const emailOrPhone = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!emailOrPhone || !password) {
                alert('Please enter email/phone and password');
                return;
            }
            
            // Find user
            const users = BINGA_MARKETPLACE_DB.users.getAll();
            const user = users.find(u => 
                (u.email === emailOrPhone || u.phone === emailOrPhone || u.username === emailOrPhone) && 
                u.password === password
            );
            
            if (user) {
                currentUser = user;
                localStorage.setItem('binga_current_user', JSON.stringify(user));
                updateAuthUI();
                closeAuthModal();
                
                // Clear form
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                
                // Show success message
                showAlert('Login successful!', 'success');
            } else {
                alert('Invalid email/phone or password');
            }
        }
        
        // Register function
        function register() {
            const name = document.getElementById('registerName').value;
            const phone = document.getElementById('registerPhone').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const location = document.getElementById('registerLocation').value;
            
            if (!name || !phone || !password || !location) {
                alert('Please fill all required fields');
                return;
            }
            
            // Check if user already exists
            const users = BINGA_MARKETPLACE_DB.users.getAll();
            if (users.find(u => u.phone === phone)) {
                alert('Phone number already registered');
                return;
            }
            
            // Create username from phone
            const username = 'user' + phone.replace(/\D/g, '').slice(-6);
            
            // Add new user
            const newUser = BINGA_MARKETPLACE_DB.users.add({
                username: username,
                password: password,
                name: name,
                phone: phone,
                email: email || '',
                location: location,
                type: 'user'
            });
            
            currentUser = newUser;
            localStorage.setItem('binga_current_user', JSON.stringify(newUser));
            updateAuthUI();
            closeAuthModal();
            
            // Clear form
            document.getElementById('registerName').value = '';
            document.getElementById('registerPhone').value = '';
            document.getElementById('registerEmail').value = '';
            document.getElementById('registerPassword').value = '';
            
            // Show success message
            showAlert('Registration successful! You can now post ads.', 'success');
        }
        
        // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                currentUser = null;
                localStorage.removeItem('binga_current_user');
                showAuthButtons();
                showSection('home');
                showAlert('Logged out successfully', 'success');
            }
        }
        
        // Load marketplace products
        function loadMarketplace() {
            const products = BINGA_MARKETPLACE_DB.products.getActive();
            
            // Sort by date (newest first)
            products.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            // Check if there are any products
            if (products.length === 0) {
                // Show empty marketplace message
                document.getElementById('marketplaceMessage').style.display = 'block';
                document.getElementById('featuredProducts').style.display = 'none';
                document.getElementById('recentProductsMessage').style.display = 'block';
                document.getElementById('recentProducts').style.display = 'none';
                return;
            }
            
            // Hide empty messages
            document.getElementById('marketplaceMessage').style.display = 'none';
            document.getElementById('recentProductsMessage').style.display = 'none';
            
            // Featured products (verified and popular)
            const featuredProducts = products.filter(p => p.verified).slice(0, 8);
            const recentProducts = products.slice(0, 12);
            
            // Display featured products
            const featuredContainer = document.getElementById('featuredProducts');
            featuredContainer.style.display = 'grid';
            featuredContainer.innerHTML = featuredProducts.map(product => renderProductCard(product)).join('');
            
            // Display recent products
            const recentContainer = document.getElementById('recentProducts');
            recentContainer.style.display = 'grid';
            recentContainer.innerHTML = recentProducts.map(product => renderProductCard(product)).join('');
        }
        
        // Render product card
        function renderProductCard(product) {
            const categoryIcons = {
                'fish': 'üêü',
                'goat': 'üêê',
                'cow': 'üêÑ',
                'poultry': 'üêì',
                'agriculture': 'üåæ',
                'services': 'üîß',
                'property': 'üè†',
                'vehicles': 'üöó'
            };
            
            const icon = categoryIcons[product.category] || 'üì¶';
            
            return `
                <div class="product-card">
                    <div class="product-image">
                        ${icon}
                        <div class="product-price">$${product.price}</div>
                    </div>
                    <div class="product-details">
                        <h3 class="product-title">
                            ${product.title}
                            ${product.verified ? '<span class="verified-badge">‚úì Verified</span>' : ''}
                        </h3>
                        <p class="product-meta">${product.description.substring(0, 60)}...</p>
                        <div class="product-location">
                            <i class="fas fa-map-marker-alt"></i> ${product.location}
                        </div>
                        <a href="${product.whatsappLink}" target="_blank" class="whatsapp-btn">
                            <i class="fab fa-whatsapp"></i> Contact Seller
                        </a>
                    </div>
                </div>
            `;
        }
        
        // Load categories with counts
        function loadCategories() {
            const categories = BINGA_MARKETPLACE_DB.categories.getAll();
            const activeProducts = BINGA_MARKETPLACE_DB.products.getActive();
            
            const container = document.getElementById('categoryList');
            
            container.innerHTML = categories.map(cat => {
                // Count products in this category
                const count = activeProducts.filter(p => p.category === cat.id).length;
                
                return `
                    <li class="category-item">
                        <a href="#" onclick="showCategory('${cat.id}')">
                            ${cat.icon} ${cat.name}
                            <span class="category-count">${count}</span>
                        </a>
                    </li>
                `;
            }).join('');
        }
        
        // Load locations with counts
        function loadLocations() {
            const locations = BINGA_MARKETPLACE_DB.locations.getAll();
            const activeProducts = BINGA_MARKETPLACE_DB.products.getActive();
            
            const container = document.getElementById('locationList');
            
            container.innerHTML = locations.map(loc => {
                // Count products in this location
                const count = activeProducts.filter(p => p.location === loc.id).length;
                
                return `
                    <li class="location-item">
                        <a href="#" onclick="showLocation('${loc.id}')">
                            ${loc.name}
                            <span class="location-count">${count}</span>
                        </a>
                    </li>
                `;
            }).join('');
        }
        
        // Show section (home, fish, livestock, etc.)
        function showSection(section) {
            // Hide all sections
            document.getElementById('homeSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'none';
            document.getElementById('adminSection').style.display = 'none';
            document.getElementById('postAdSection').style.display = 'none';
            
            // Show selected section
            if (section === 'home') {
                document.getElementById('homeSection').style.display = 'block';
                loadMarketplace();
            } else if (section === 'dashboard') {
                if (!currentUser) {
                    openAuthModal();
                    return;
                }
                document.getElementById('dashboardSection').style.display = 'block';
                loadUserDashboard();
            } else if (section === 'admin') {
                if (!currentUser || currentUser.type !== 'admin') {
                    alert('Admin access required');
                    return;
                }
                document.getElementById('adminSection').style.display = 'block';
                showAdminTab('pending');
            } else {
                // For category sections, filter products
                document.getElementById('homeSection').style.display = 'block';
                filterProductsByCategory(section);
            }
            
            // Update active nav
            setActiveNav(section);
        }
        
        // Set active navigation
        function setActiveNav(section) {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Find and activate the correct nav link
            const navLinks = document.querySelectorAll('.nav-link');
            for (let link of navLinks) {
                if (link.textContent.toLowerCase().includes(section.toLowerCase()) || 
                    (section === 'home' && link.classList.contains('active'))) {
                    link.classList.add('active');
                    break;
                }
            }
        }
        
        // Filter products by category
        function filterProductsByCategory(category) {
            const products = BINGA_MARKETPLACE_DB.products.getByCategory(category);
            const container = document.getElementById('recentProducts');
            const message = document.getElementById('recentProductsMessage');
            
            if (products.length > 0) {
                message.style.display = 'none';
                container.style.display = 'grid';
                container.innerHTML = products.map(product => renderProductCard(product)).join('');
                
                // Update section title
                const categoryNames = {
                    'fish': 'Fish & Seafood',
                    'goat': 'Goats',
                    'cow': 'Cattle',
                    'poultry': 'Poultry',
                    'agriculture': 'Agricultural Products',
                    'services': 'Services',
                    'property': 'Property',
                    'vehicles': 'Vehicles'
                };
                
                document.querySelector('#homeSection .section-title').innerHTML = `
                    <i class="fas fa-tag"></i> ${categoryNames[category] || category}
                `;
            } else {
                container.style.display = 'none';
                message.style.display = 'block';
                message.innerHTML = `
                    <div style="font-size: 60px; margin-bottom: 20px;">üè∑Ô∏è</div>
                    <h3>No products in ${categoryNames[category] || category} category</h3>
                    <p>Be the first to post in this category!</p>
                    ${currentUser ? 
                        `<button class="btn btn-primary" onclick="showPostAdForm()" style="margin-top: 15px;">
                            <i class="fas fa-plus-circle"></i> Post an Ad
                        </button>` : 
                        `<button class="btn btn-primary" onclick="openAuthModal()" style="margin-top: 15px;">
                            <i class="fas fa-user-plus"></i> Register to Post
                        </button>`
                    }
                `;
            }
        }
        
        // Show category
        function showCategory(categoryId) {
            showSection('home');
            filterProductsByCategory(categoryId);
            setActiveNav(categoryId);
        }
        
        // Show location
        function showLocation(locationId) {
            const products = BINGA_MARKETPLACE_DB.products.getActive()
                .filter(p => p.location === locationId);
            
            const container = document.getElementById('recentProducts');
            const message = document.getElementById('recentProductsMessage');
            
            if (products.length > 0) {
                message.style.display = 'none';
                container.style.display = 'grid';
                container.innerHTML = products.map(product => renderProductCard(product)).join('');
                
                // Update section title
                document.querySelector('#homeSection .section-title').innerHTML = `
                    <i class="fas fa-map-marker-alt"></i> Products in ${locationId}
                `;
            } else {
                container.style.display = 'none';
                message.style.display = 'block';
                message.innerHTML = `
                    <div style="font-size: 60px; margin-bottom: 20px;">üìç</div>
                    <h3>No products in ${locationId}</h3>
                    <p>Be the first to post in this location!</p>
                `;
            }
        }
        
        // Search products
        function searchProducts() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categorySelect').value;
            const location = document.getElementById('locationSelect').value;
            
            let products = BINGA_MARKETPLACE_DB.products.getActive();
            
            // Filter by search query
            if (query) {
                products = products.filter(p => 
                    p.title.toLowerCase().includes(query) || 
                    p.description.toLowerCase().includes(query)
                );
            }
            
            // Filter by category
            if (category) {
                products = products.filter(p => p.category === category);
            }
            
            // Filter by location
            if (location) {
                products = products.filter(p => p.location === location);
            }
            
            // Display results
            const container = document.getElementById('recentProducts');
            const message = document.getElementById('recentProductsMessage');
            
            if (products.length > 0) {
                message.style.display = 'none';
                container.style.display = 'grid';
                container.innerHTML = products.map(product => renderProductCard(product)).join('');
                
                // Update section title
                let title = 'Search Results';
                if (query || category || location) {
                    title = `${products.length} Product(s) Found`;
                }
                document.querySelector('#homeSection .section-title').innerHTML = `
                    <i class="fas fa-search"></i> ${title}
                `;
            } else {
                container.style.display = 'none';
                message.style.display = 'block';
                message.innerHTML = `
                    <div style="font-size: 60px; margin-bottom: 20px;">üîç</div>
                    <h3>No products found</h3>
                    <p>Try different search terms or filters</p>
                `;
            }
        }
        
        // Show post ad form
        function showPostAdForm() {
            if (!currentUser) {
                openAuthModal();
                return;
            }
            
            // Hide other sections
            document.getElementById('homeSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'none';
            document.getElementById('adminSection').style.display = 'none';
            
            // Show post ad section
            document.getElementById('postAdSection').style.display = 'block';
            
            // Load post ad form
            document.getElementById('postAdForm').innerHTML = `
                <form id="adForm">
                    <div class="form-group">
                        <label class="form-label">Ad Title*</label>
                        <input type="text" class="form-control" id="adTitle" placeholder="e.g., Fresh Kapenta - 20kg">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Category*</label>
                        <select class="form-control" id="adCategory">
                            <option value="">Select Category</option>
                            <option value="fish">Fish & Seafood</option>
                            <option value="goat">Goats</option>
                            <option value="cow">Cattle</option>
                            <option value="poultry">Poultry</option>
                            <option value="agriculture">Agriculture</option>
                            <option value="services">Services</option>
                            <option value="property">Property</option>
                            <option value="vehicles">Vehicles</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Price (USD)*</label>
                        <input type="number" class="form-control" id="adPrice" placeholder="e.g., 80">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Location in Binga*</label>
                        <select class="form-control" id="adLocation">
                            <option value="">Select Location</option>
                            <option>Siachilaba</option>
                            <option>Kariyangwe</option>
                            <option>Binga Centre</option>
                            <option>Chete Island</option>
                            <option>Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Description*</label>
                        <textarea class="form-control" id="adDescription" rows="4" placeholder="Describe your product or service..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Contact Phone*</label>
                        <input type="tel" class="form-control" id="adPhone" value="${currentUser.phone}">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Images (Optional)</label>
                        <input type="file" class="form-control" id="adImages" multiple accept="image/*">
                        <small>You can upload up to 4 images. Clear photos help sell faster.</small>
                    </div>
                    
                    <button type="button" class="btn btn-primary" onclick="submitAd()" style="margin-top: 20px;">
                        <i class="fas fa-paper-plane"></i> Submit Ad
                    </button>
                    
                    <button type="button" class="btn" onclick="showSection('home')" style="margin-top: 20px; margin-left: 10px; background: #f0f0f0;">
                        Cancel
                    </button>
                </form>
            `;
        }
        
        // Submit ad
        function submitAd() {
            const title = document.getElementById('adTitle').value;
            const category = document.getElementById('adCategory').value;
            const price = document.getElementById('adPrice').value;
            const location = document.getElementById('adLocation').value;
            const description = document.getElementById('adDescription').value;
            const phone = document.getElementById('adPhone').value;
            
            if (!title || !category || !price || !location || !description || !phone) {
                alert('Please fill all required fields');
                return;
            }
            
            // Create WhatsApp link
            const whatsappLink = `https://wa.me/${phone.replace(/\D/g, '')}?text=Hi! I saw your ${title} on Binga Marketplace`;
            
            // Add product
            const product = BINGA_MARKETPLACE_DB.products.add({
                title: title,
                description: description,
                category: category,
                price: parseFloat(price),
                location: location,
                sellerId: currentUser.id,
                sellerName: currentUser.name,
                sellerPhone: phone,
                whatsappLink: whatsappLink,
                status: 'pending' // Will be reviewed by admin
            });
            
            // Update user's products
            const users = BINGA_MARKETPLACE_DB.users.getAll();
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            if (userIndex !== -1) {
                users[userIndex].products.push(product.id);
                localStorage.setItem('binga_marketplace_users', JSON.stringify(users));
                currentUser = users[userIndex];
                localStorage.setItem('binga_current_user', JSON.stringify(currentUser));
            }
            
            // Show success message
            showAlert('Ad submitted successfully! It will be reviewed by admin before appearing on the marketplace.', 'success');
            
            // Clear form
            document.getElementById('adTitle').value = '';
            document.getElementById('adCategory').value = '';
            document.getElementById('adPrice').value = '';
            document.getElementById('adLocation').value = '';
            document.getElementById('adDescription').value = '';
            
            // Go to dashboard
            showSection('dashboard');
        }
        
        // Load user dashboard
        function loadUserDashboard() {
            if (!currentUser) return;
            
            // Update stats
            const myProducts = BINGA_MARKETPLACE_DB.products.getBySeller(currentUser.id);
            const totalViews = myProducts.reduce((sum, p) => sum + (p.views || 0), 0);
            
            document.getElementById('myProductsCount').textContent = myProducts.length;
            document.getElementById('myViewsCount').textContent = totalViews;
            document.getElementById('myMessagesCount').textContent = '0'; // Would come from messages DB
            document.getElementById('myRating').textContent = currentUser.rating || '0.0';
            
            // Load dashboard content
            const container = document.getElementById('userDashboard');
            
            if (currentUser.type === 'admin') {
                container.innerHTML = `
                    <div style="display: flex; gap: 20px; margin-bottom: 30px;">
                        <button class="btn btn-primary" onclick="showSection('admin')">
                            <i class="fas fa-crown"></i> Admin Panel
                        </button>
                        <button class="btn" onclick="showPostAdForm()" style="background: var(--accent); color: white;">
                            <i class="fas fa-plus-circle"></i> Post New Ad
                        </button>
                    </div>
                    
                    <h3>My Products (${myProducts.length})</h3>
                    ${myProducts.length > 0 ? 
                        `<div class="products-grid" style="margin-top: 20px;">
                            ${myProducts.map(p => renderProductCard(p)).join('')}
                        </div>` :
                        `<p>You haven't posted any ads yet. <a href="#" onclick="showPostAdForm()" style="color: var(--primary);">Post your first ad</a></p>`
                    }
                `;
            } else {
                container.innerHTML = `
                    <div style="margin-bottom: 30px;">
                        <button class="btn btn-primary" onclick="showPostAdForm()">
                            <i class="fas fa-plus-circle"></i> Post New Ad
                        </button>
                    </div>
                    
                    <h3>My Products (${myProducts.length})</h3>
                    ${myProducts.length > 0 ? 
                        `<div class="products-grid" style="margin-top: 20px;">
                            ${myProducts.map(p => `
                                <div class="product-card">
                                    <div class="product-image">
                                        ${p.category === 'fish' ? 'üêü' : p.category === 'goat' ? 'üêê' : 'üì¶'}
                                        <div class="product-price">$${p.price}</div>
                                    </div>
                                    <div class="product-details">
                                        <h3 class="product-title">${p.title}</h3>
                                        <p class="product-meta">Status: <strong>${p.status}</strong></p>
                                        <p class="product-meta">Views: ${p.views || 0}</p>
                                        <div class="product-location">
                                            <i class="fas fa-map-marker-alt"></i> ${p.location}
                                        </div>
                                        <div style="margin-top: 10px;">
                                            <button class="btn" style="background: #f0f0f0; padding: 5px 10px; font-size: 12px;" onclick="editAd(${p.id})">Edit</button>
                                            <button class="btn" style="background: #f8d7da; color: #721c24; padding: 5px 10px; font-size: 12px;" onclick="deleteAd(${p.id})">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>` :
                        `<div class="no-products" style="padding: 30px;">
                            <h3>You haven't posted any ads yet</h3>
                            <p>Start selling by posting your first ad</p>
                            <button class="btn btn-primary" onclick="showPostAdForm()" style="margin-top: 15px;">
                                <i class="fas fa-plus-circle"></i> Post Your First Ad
                            </button>
                        </div>`
                    }
                `;
            }
        }
        
        // Show admin tab
        function showAdminTab(tab) {
            // Update active tab
            document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            const container = document.getElementById('adminContent');
            
            if (tab === 'pending') {
                const pendingProducts = BINGA_MARKETPLACE_DB.products.getAll()
                    .filter(p => p.status === 'pending');
                
                container.innerHTML = `
                    <h3>Pending Ads (${pendingProducts.length})</h3>
                    ${pendingProducts.length > 0 ? 
                        `<div class="products-grid" style="margin-top: 20px;">
                            ${pendingProducts.map(p => `
                                <div class="product-card">
                                    <div class="product-image">
                                        ${p.category === 'fish' ? 'üêü' : p.category === 'goat' ? 'üêê' : 'üì¶'}
                                        <div class="product-price">$${p.price}</div>
                                    </div>
                                    <div class="product-details">
                                        <h3 class="product-title">${p.title}</h3>
                                        <p class="product-meta">${p.description.substring(0, 60)}...</p>
                                        <p class="product-meta">Seller: ${p.sellerName} (${p.sellerPhone})</p>
                                        <div class="product-location">
                                            <i class="fas fa-map-marker-alt"></i> ${p.location}
                                        </div>
                                        <div style="margin-top: 10px; display: flex; gap: 10px;">
                                            <button class="btn" style="background: var(--accent); color: white; padding: 5px 15px;" onclick="approveAd(${p.id})">Approve</button>
                                            <button class="btn" style="background: var(--danger); color: white; padding: 5px 15px;" onclick="rejectAd(${p.id})">Reject</button>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>` :
                        `<div class="no-products" style="padding: 30px;">
                            <div style="font-size: 60px; margin-bottom: 20px;">‚úÖ</div>
                            <h3>No pending ads to review</h3>
                            <p>All ads have been processed</p>
                        </div>`
                    }
                `;
            } else if (tab === 'users') {
                const users = BINGA_MARKETPLACE_DB.users.getAll();
                
                container.innerHTML = `
                    <h3>Registered Users (${users.length})</h3>
                    <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                        <thead>
                            <tr style="background: #f8f9fa;">
                                <th style="padding: 12px; text-align: left;">Name</th>
                                <th style="padding: 12px; text-align: left;">Phone</th>
                                <th style="padding: 12px; text-align: left;">Type</th>
                                <th style="padding: 12px; text-align: left;">Products</th>
                                <th style="padding: 12px; text-align: left;">Joined</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${users.map(u => `
                                <tr style="border-bottom: 1px solid #eee;">
                                    <td style="padding: 12px;">${u.name} ${u.type === 'admin' ? '<span style="background: gold; padding: 2px 8px; border-radius: 10px; font-size: 11px;">Admin</span>' : ''}</td>
                                    <td style="padding: 12px;">${u.phone}</td>
                                    <td style="padding: 12px;">${u.type}</td>
                                    <td style="padding: 12px;">${u.products ? u.products.length : 0}</td>
                                    <td style="padding: 12px;">${new Date(u.registered).toLocaleDateString()}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            } else if (tab === 'stats') {
                const products = BINGA_MARKETPLACE_DB.products.getAll();
                const users = BINGA_MARKETPLACE_DB.users.getAll();
                const activeProducts = products.filter(p => p.status === 'active');
                const pendingProducts = products.filter(p => p.status === 'pending');
                
                container.innerHTML = `
                    <h3>Marketplace Statistics</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div class="stat-card">
                            <div class="stat-number">${users.length}</div>
                            <div>Total Users</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${activeProducts.length}</div>
                            <div>Active Ads</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${pendingProducts.length}</div>
                            <div>Pending Ads</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${products.length}</div>
                            <div>Total Ads</div>
                        </div>
                    </div>
                `;
            }
        }
        
        // Admin: Approve ad
        function approveAd(productId) {
            BINGA_MARKETPLACE_DB.products.update(productId, {
                status: 'active',
                verified: true
            });
            
            showAlert('Ad approved successfully! It is now visible in the marketplace.', 'success');
            showAdminTab('pending');
            loadMarketplace();
            loadCategories();
            loadLocations();
        }
        
        // Admin: Reject ad
        function rejectAd(productId) {
            BINGA_MARKETPLACE_DB.products.update(productId, {
                status: 'rejected'
            });
            
            showAlert('Ad rejected', 'success');
            showAdminTab('pending');
        }
        
        // User: Edit ad
        function editAd(productId) {
            alert('Edit feature coming soon!');
        }
        
        // User: Delete ad
        function deleteAd(productId) {
            if (confirm('Are you sure you want to delete this ad?')) {
                BINGA_MARKETPLACE_DB.products.delete(productId);
                showAlert('Ad deleted successfully', 'success');
                loadUserDashboard();
                loadMarketplace();
                loadCategories();
                loadLocations();
            }
        }
        
        // Show alert
        function showAlert(message, type) {
            // Create alert element
            const alertEl = document.createElement('div');
            alertEl.className = `alert alert-${type}`;
            alertEl.innerHTML = `
                ${message}
                <button onclick="this.parentElement.remove()" style="float: right; background: none; border: none; font-size: 20px; cursor: pointer;">√ó</button>
            `;
            
            // Insert at top of main content
            const mainContent = document.getElementById('mainContent');
            mainContent.insertBefore(alertEl, mainContent.firstChild);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (alertEl.parentElement) {
                    alertEl.remove();
                }
            }, 5000);
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('authModal');
            if (event.target === modal) {
                closeAuthModal();
            }
        };
        
        // Initialize app when page loads
        window.onload = initApp;
    </script>
</body>
</html>
